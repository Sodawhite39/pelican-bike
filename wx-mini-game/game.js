"use strict";var _e=Object.create;var Ne=Object.defineProperty;var et=Object.getOwnPropertyDescriptor;var tt=Object.getOwnPropertyNames;var nt=Object.getPrototypeOf,it=Object.prototype.hasOwnProperty;var rt=(w,c)=>()=>(c||w((c={exports:{}}).exports,c),c.exports);var st=(w,c,a,e)=>{if(c&&typeof c=="object"||typeof c=="function")for(let s of tt(c))!it.call(w,s)&&s!==a&&Ne(w,s,{get:()=>c[s],enumerable:!(e=et(c,s))||e.enumerable});return w};var ne=(w,c,a)=>(a=w!=null?_e(nt(w)):{},st(c||!w||!w.__esModule?Ne(a,"default",{value:w,enumerable:!0}):a,w));var ee=rt((ie,Re)=>{(function(c,a){typeof ie=="object"&&typeof Re=="object"?Re.exports=a():typeof define=="function"&&define.amd?define("Matter",[],a):typeof ie=="object"?ie.Matter=a():c.Matter=a()})(ie,function(){return function(w){var c={};function a(e){if(c[e])return c[e].exports;var s=c[e]={i:e,l:!1,exports:{}};return w[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=w,a.c=c,a.d=function(e,s,i){a.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:i})},a.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,s){if(s&1&&(e=a(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var r in e)a.d(i,r,function(u){return e[u]}.bind(null,r));return i},a.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(s,"a",s),s},a.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},a.p="",a(a.s=20)}([function(w,c){var a={};w.exports=a,function(){a._baseDelta=1e3/60,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(s,i){var r,u,n;typeof i=="boolean"?(r=2,n=i):(r=1,n=!0);for(var m=r;m<arguments.length;m++){var f=arguments[m];if(f)for(var t in f)n&&f[t]&&f[t].constructor===Object&&(!s[t]||s[t].constructor===Object)?(s[t]=s[t]||{},a.extend(s[t],n,f[t])):s[t]=f[t]}return s},a.clone=function(s,i){return a.extend({},i,s)},a.keys=function(s){if(Object.keys)return Object.keys(s);var i=[];for(var r in s)i.push(r);return i},a.values=function(s){var i=[];if(Object.keys){for(var r=Object.keys(s),u=0;u<r.length;u++)i.push(s[r[u]]);return i}for(var n in s)i.push(s[n]);return i},a.get=function(s,i,r,u){i=i.split(".").slice(r,u);for(var n=0;n<i.length;n+=1)s=s[i[n]];return s},a.set=function(s,i,r,u,n){var m=i.split(".").slice(u,n);return a.get(s,i,0,-1)[m[m.length-1]]=r,r},a.shuffle=function(s){for(var i=s.length-1;i>0;i--){var r=Math.floor(a.random()*(i+1)),u=s[i];s[i]=s[r],s[r]=u}return s},a.choose=function(s){return s[Math.floor(a.random()*s.length)]},a.isElement=function(s){return typeof HTMLElement!="undefined"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},a.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},a.isFunction=function(s){return typeof s=="function"},a.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},a.isString=function(s){return toString.call(s)==="[object String]"},a.clamp=function(s,i,r){return s<i?i:s>r?r:s},a.sign=function(s){return s<0?-1:1},a.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(s,i){return s=typeof s!="undefined"?s:0,i=typeof i!="undefined"?i:1,s+e()*(i-s)};var e=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[s]||(a.warn(s),a._warnedOnce[s]=!0)},a.deprecated=function(s,i,r){s[i]=a.chain(function(){a.warnOnce("\u{1F505} deprecated \u{1F505}",r)},s[i])},a.nextId=function(){return a._nextId++},a.indexOf=function(s,i){if(s.indexOf)return s.indexOf(i);for(var r=0;r<s.length;r++)if(s[r]===i)return r;return-1},a.map=function(s,i){if(s.map)return s.map(i);for(var r=[],u=0;u<s.length;u+=1)r.push(i(s[u]));return r},a.topologicalSort=function(s){var i=[],r=[],u=[];for(var n in s)!r[n]&&!u[n]&&a._topologicalSort(n,r,u,s,i);return i},a._topologicalSort=function(s,i,r,u,n){var m=u[s]||[];r[s]=!0;for(var f=0;f<m.length;f+=1){var t=m[f];r[t]||i[t]||a._topologicalSort(t,i,r,u,n)}r[s]=!1,i[s]=!0,n.push(s)},a.chain=function(){for(var s=[],i=0;i<arguments.length;i+=1){var r=arguments[i];r._chained?s.push.apply(s,r._chained):s.push(r)}var u=function(){for(var n,m=new Array(arguments.length),f=0,t=arguments.length;f<t;f++)m[f]=arguments[f];for(f=0;f<s.length;f+=1){var l=s[f].apply(n,m);typeof l!="undefined"&&(n=l)}return n};return u._chained=s,u},a.chainPathBefore=function(s,i,r){return a.set(s,i,a.chain(r,a.get(s,i)))},a.chainPathAfter=function(s,i,r){return a.set(s,i,a.chain(a.get(s,i),r))},a.setDecomp=function(s){a._decomp=s},a.getDecomp=function(){var s=a._decomp;try{!s&&typeof window!="undefined"&&(s=window.decomp),!s&&typeof global!="undefined"&&(s=global.decomp)}catch(i){s=null}return s}}()},function(w,c){var a={};w.exports=a,function(){a.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&a.update(s,e),s},a.update=function(e,s,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<s.length;r++){var u=s[r];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},a.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},a.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},a.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},a.shift=function(e,s){var i=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+i,e.min.y=s.y,e.max.y=s.y+r}}()},function(w,c){var a={};w.exports=a,function(){a.create=function(e,s){return{x:e||0,y:s||0}},a.clone=function(e){return{x:e.x,y:e.y}},a.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},a.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},a.rotate=function(e,s,i){var r=Math.cos(s),u=Math.sin(s);i||(i={});var n=e.x*r-e.y*u;return i.y=e.x*u+e.y*r,i.x=n,i},a.rotateAbout=function(e,s,i,r){var u=Math.cos(s),n=Math.sin(s);r||(r={});var m=i.x+((e.x-i.x)*u-(e.y-i.y)*n);return r.y=i.y+((e.x-i.x)*n+(e.y-i.y)*u),r.x=m,r},a.normalise=function(e){var s=a.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},a.dot=function(e,s){return e.x*s.x+e.y*s.y},a.cross=function(e,s){return e.x*s.y-e.y*s.x},a.cross3=function(e,s,i){return(s.x-e.x)*(i.y-e.y)-(s.y-e.y)*(i.x-e.x)},a.add=function(e,s,i){return i||(i={}),i.x=e.x+s.x,i.y=e.y+s.y,i},a.sub=function(e,s,i){return i||(i={}),i.x=e.x-s.x,i.y=e.y-s.y,i},a.mult=function(e,s){return{x:e.x*s,y:e.y*s}},a.div=function(e,s){return{x:e.x/s,y:e.y/s}},a.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},a.neg=function(e){return{x:-e.x,y:-e.y}},a.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},a._temp=[a.create(),a.create(),a.create(),a.create(),a.create(),a.create()]}()},function(w,c,a){var e={};w.exports=e;var s=a(2),i=a(0);(function(){e.create=function(r,u){for(var n=[],m=0;m<r.length;m++){var f=r[m],t={x:f.x,y:f.y,index:m,body:u,isInternal:!1};n.push(t)}return n},e.fromPath=function(r,u){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,m=[];return r.replace(n,function(f,t,l){m.push({x:parseFloat(t),y:parseFloat(l)})}),e.create(m,u)},e.centre=function(r){for(var u=e.area(r,!0),n={x:0,y:0},m,f,t,l=0;l<r.length;l++)t=(l+1)%r.length,m=s.cross(r[l],r[t]),f=s.mult(s.add(r[l],r[t]),m),n=s.add(n,f);return s.div(n,6*u)},e.mean=function(r){for(var u={x:0,y:0},n=0;n<r.length;n++)u.x+=r[n].x,u.y+=r[n].y;return s.div(u,r.length)},e.area=function(r,u){for(var n=0,m=r.length-1,f=0;f<r.length;f++)n+=(r[m].x-r[f].x)*(r[m].y+r[f].y),m=f;return u?n/2:Math.abs(n)/2},e.inertia=function(r,u){for(var n=0,m=0,f=r,t,l,o=0;o<f.length;o++)l=(o+1)%f.length,t=Math.abs(s.cross(f[l],f[o])),n+=t*(s.dot(f[l],f[l])+s.dot(f[l],f[o])+s.dot(f[o],f[o])),m+=t;return u/6*(n/m)},e.translate=function(r,u,n){n=typeof n!="undefined"?n:1;var m=r.length,f=u.x*n,t=u.y*n,l;for(l=0;l<m;l++)r[l].x+=f,r[l].y+=t;return r},e.rotate=function(r,u,n){if(u!==0){var m=Math.cos(u),f=Math.sin(u),t=n.x,l=n.y,o=r.length,h,v,y,A;for(A=0;A<o;A++)h=r[A],v=h.x-t,y=h.y-l,h.x=t+(v*m-y*f),h.y=l+(v*f+y*m);return r}},e.contains=function(r,u){for(var n=u.x,m=u.y,f=r.length,t=r[f-1],l,o=0;o<f;o++){if(l=r[o],(n-t.x)*(l.y-t.y)+(m-t.y)*(t.x-l.x)>0)return!1;t=l}return!0},e.scale=function(r,u,n,m){if(u===1&&n===1)return r;m=m||e.centre(r);for(var f,t,l=0;l<r.length;l++)f=r[l],t=s.sub(f,m),r[l].x=m.x+t.x*u,r[l].y=m.y+t.y*n;return r},e.chamfer=function(r,u,n,m,f){typeof u=="number"?u=[u]:u=u||[8],n=typeof n!="undefined"?n:-1,m=m||2,f=f||14;for(var t=[],l=0;l<r.length;l++){var o=r[l-1>=0?l-1:r.length-1],h=r[l],v=r[(l+1)%r.length],y=u[l<u.length?l:u.length-1];if(y===0){t.push(h);continue}var A=s.normalise({x:h.y-o.y,y:o.x-h.x}),P=s.normalise({x:v.y-h.y,y:h.x-v.x}),p=Math.sqrt(2*Math.pow(y,2)),g=s.mult(i.clone(A),y),x=s.normalise(s.mult(s.add(A,P),.5)),d=s.sub(h,s.mult(x,p)),C=n;n===-1&&(C=Math.pow(y,.32)*1.75),C=i.clamp(C,m,f),C%2===1&&(C+=1);for(var M=Math.acos(s.dot(A,P)),S=M/C,E=0;E<C;E++)t.push(s.add(s.rotate(g,S*E),d))}return t},e.clockwiseSort=function(r){var u=e.mean(r);return r.sort(function(n,m){return s.angle(u,n)-s.angle(u,m)}),r},e.isConvex=function(r){var u=0,n=r.length,m,f,t,l;if(n<3)return null;for(m=0;m<n;m++)if(f=(m+1)%n,t=(m+2)%n,l=(r[f].x-r[m].x)*(r[t].y-r[f].y),l-=(r[f].y-r[m].y)*(r[t].x-r[f].x),l<0?u|=1:l>0&&(u|=2),u===3)return!1;return u!==0?!0:null},e.hull=function(r){var u=[],n=[],m,f;for(r=r.slice(0),r.sort(function(t,l){var o=t.x-l.x;return o!==0?o:t.y-l.y}),f=0;f<r.length;f+=1){for(m=r[f];n.length>=2&&s.cross3(n[n.length-2],n[n.length-1],m)<=0;)n.pop();n.push(m)}for(f=r.length-1;f>=0;f-=1){for(m=r[f];u.length>=2&&s.cross3(u[u.length-2],u[u.length-1],m)<=0;)u.pop();u.push(m)}return u.pop(),n.pop(),u.concat(n)}})()},function(w,c,a){var e={};w.exports=e;var s=a(3),i=a(2),r=a(7),u=a(0),n=a(1),m=a(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var l={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},o=u.extend(l,t);return f(o,t),o},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var f=function(t,l){l=l||{},e.set(t,{bounds:t.bounds||n.create(t.vertices),positionPrev:t.positionPrev||i.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),m.rotate(t.axes,t.angle),n.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:l.axes||t.axes,area:l.area||t.area,mass:l.mass||t.mass,inertia:l.inertia||t.inertia});var o=t.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),h=t.isStatic?"#555":"#ccc",v=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||o,t.render.strokeStyle=t.render.strokeStyle||h,t.render.lineWidth=t.render.lineWidth||v,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,l,o){var h;typeof l=="string"&&(h=l,l={},l[h]=o);for(h in l)if(Object.prototype.hasOwnProperty.call(l,h))switch(o=l[h],h){case"isStatic":e.setStatic(t,o);break;case"isSleeping":r.set(t,o);break;case"mass":e.setMass(t,o);break;case"density":e.setDensity(t,o);break;case"inertia":e.setInertia(t,o);break;case"vertices":e.setVertices(t,o);break;case"position":e.setPosition(t,o);break;case"angle":e.setAngle(t,o);break;case"velocity":e.setVelocity(t,o);break;case"angularVelocity":e.setAngularVelocity(t,o);break;case"speed":e.setSpeed(t,o);break;case"angularSpeed":e.setAngularSpeed(t,o);break;case"parts":e.setParts(t,o);break;case"centre":e.setCentre(t,o);break;default:t[h]=o}},e.setStatic=function(t,l){for(var o=0;o<t.parts.length;o++){var h=t.parts[o];l?(h.isStatic||(h._original={restitution:h.restitution,friction:h.friction,mass:h.mass,inertia:h.inertia,density:h.density,inverseMass:h.inverseMass,inverseInertia:h.inverseInertia}),h.restitution=0,h.friction=1,h.mass=h.inertia=h.density=1/0,h.inverseMass=h.inverseInertia=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.angularVelocity=0,h.speed=0,h.angularSpeed=0,h.motion=0):h._original&&(h.restitution=h._original.restitution,h.friction=h._original.friction,h.mass=h._original.mass,h.inertia=h._original.inertia,h.density=h._original.density,h.inverseMass=h._original.inverseMass,h.inverseInertia=h._original.inverseInertia,h._original=null),h.isStatic=l}},e.setMass=function(t,l){var o=t.inertia/(t.mass/6);t.inertia=o*(l/6),t.inverseInertia=1/t.inertia,t.mass=l,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,l){e.setMass(t,l*t.area),t.density=l},e.setInertia=function(t,l){t.inertia=l,t.inverseInertia=1/t.inertia},e.setVertices=function(t,l){l[0].body===t?t.vertices=l:t.vertices=s.create(l,t),t.axes=m.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var o=s.centre(t.vertices);s.translate(t.vertices,o,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),n.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,l,o){var h;for(l=l.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,h=0;h<l.length;h++){var v=l[h];v!==t&&(v.parent=t,t.parts.push(v))}if(t.parts.length!==1){if(o=typeof o!="undefined"?o:!0,o){var y=[];for(h=0;h<l.length;h++)y=y.concat(l[h].vertices);s.clockwiseSort(y);var A=s.hull(y),P=s.centre(A);e.setVertices(t,A),s.translate(t.vertices,P)}var p=e._totalProperties(t);t.area=p.area,t.parent=t,t.position.x=p.centre.x,t.position.y=p.centre.y,t.positionPrev.x=p.centre.x,t.positionPrev.y=p.centre.y,e.setMass(t,p.mass),e.setInertia(t,p.inertia),e.setPosition(t,p.centre)}},e.setCentre=function(t,l,o){o?(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y,t.position.x+=l.x,t.position.y+=l.y):(t.positionPrev.x=l.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=l.y-(t.position.y-t.positionPrev.y),t.position.x=l.x,t.position.y=l.y)},e.setPosition=function(t,l,o){var h=i.sub(l,t.position);o?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=h.x,t.velocity.y=h.y,t.speed=i.magnitude(h)):(t.positionPrev.x+=h.x,t.positionPrev.y+=h.y);for(var v=0;v<t.parts.length;v++){var y=t.parts[v];y.position.x+=h.x,y.position.y+=h.y,s.translate(y.vertices,h),n.update(y.bounds,y.vertices,t.velocity)}},e.setAngle=function(t,l,o){var h=l-t.angle;o?(t.anglePrev=t.angle,t.angularVelocity=h,t.angularSpeed=Math.abs(h)):t.anglePrev+=h;for(var v=0;v<t.parts.length;v++){var y=t.parts[v];y.angle+=h,s.rotate(y.vertices,h,t.position),m.rotate(y.axes,h),n.update(y.bounds,y.vertices,t.velocity),v>0&&i.rotateAbout(y.position,h,t.position,y.position)}},e.setVelocity=function(t,l){var o=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-l.x*o,t.positionPrev.y=t.position.y-l.y*o,t.velocity.x=(t.position.x-t.positionPrev.x)/o,t.velocity.y=(t.position.y-t.positionPrev.y)/o,t.speed=i.magnitude(t.velocity)},e.getVelocity=function(t){var l=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*l,y:(t.position.y-t.positionPrev.y)*l}},e.getSpeed=function(t){return i.magnitude(e.getVelocity(t))},e.setSpeed=function(t,l){e.setVelocity(t,i.mult(i.normalise(e.getVelocity(t)),l))},e.setAngularVelocity=function(t,l){var o=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-l*o,t.angularVelocity=(t.angle-t.anglePrev)/o,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,l){e.setAngularVelocity(t,u.sign(e.getAngularVelocity(t))*l)},e.translate=function(t,l,o){e.setPosition(t,i.add(t.position,l),o)},e.rotate=function(t,l,o,h){if(!o)e.setAngle(t,t.angle+l,h);else{var v=Math.cos(l),y=Math.sin(l),A=t.position.x-o.x,P=t.position.y-o.y;e.setPosition(t,{x:o.x+(A*v-P*y),y:o.y+(A*y+P*v)},h),e.setAngle(t,t.angle+l,h)}},e.scale=function(t,l,o,h){var v=0,y=0;h=h||t.position;for(var A=0;A<t.parts.length;A++){var P=t.parts[A];s.scale(P.vertices,l,o,h),P.axes=m.fromVertices(P.vertices),P.area=s.area(P.vertices),e.setMass(P,t.density*P.area),s.translate(P.vertices,{x:-P.position.x,y:-P.position.y}),e.setInertia(P,e._inertiaScale*s.inertia(P.vertices,P.mass)),s.translate(P.vertices,{x:P.position.x,y:P.position.y}),A>0&&(v+=P.area,y+=P.inertia),P.position.x=h.x+(P.position.x-h.x)*l,P.position.y=h.y+(P.position.y-h.y)*o,n.update(P.bounds,P.vertices,t.velocity)}t.parts.length>1&&(t.area=v,t.isStatic||(e.setMass(t,t.density*v),e.setInertia(t,y))),t.circleRadius&&(l===o?t.circleRadius*=l:t.circleRadius=null)},e.update=function(t,l){l=(typeof l!="undefined"?l:1e3/60)*t.timeScale;var o=l*l,h=e._timeCorrection?l/(t.deltaTime||l):1,v=1-t.frictionAir*(l/u._baseDelta),y=(t.position.x-t.positionPrev.x)*h,A=(t.position.y-t.positionPrev.y)*h;t.velocity.x=y*v+t.force.x/t.mass*o,t.velocity.y=A*v+t.force.y/t.mass*o,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=l,t.angularVelocity=(t.angle-t.anglePrev)*v*h+t.torque/t.inertia*o,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var P=0;P<t.parts.length;P++){var p=t.parts[P];s.translate(p.vertices,t.velocity),P>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(p.vertices,t.angularVelocity,t.position),m.rotate(p.axes,t.angularVelocity),P>0&&i.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),n.update(p.bounds,p.vertices,t.velocity)}},e.updateVelocities=function(t){var l=e._baseDelta/t.deltaTime,o=t.velocity;o.x=(t.position.x-t.positionPrev.x)*l,o.y=(t.position.y-t.positionPrev.y)*l,t.speed=Math.sqrt(o.x*o.x+o.y*o.y),t.angularVelocity=(t.angle-t.anglePrev)*l,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,l,o){var h={x:l.x-t.position.x,y:l.y-t.position.y};t.force.x+=o.x,t.force.y+=o.y,t.torque+=h.x*o.y-h.y*o.x},e._totalProperties=function(t){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},o=t.parts.length===1?0:1;o<t.parts.length;o++){var h=t.parts[o],v=h.mass!==1/0?h.mass:1;l.mass+=v,l.area+=h.area,l.inertia+=h.inertia,l.centre=i.add(l.centre,i.mult(h.position,v))}return l.centre=i.div(l.centre,l.mass),l}})()},function(w,c,a){var e={};w.exports=e;var s=a(0);(function(){e.on=function(i,r,u){for(var n=r.split(" "),m,f=0;f<n.length;f++)m=n[f],i.events=i.events||{},i.events[m]=i.events[m]||[],i.events[m].push(u);return u},e.off=function(i,r,u){if(!r){i.events={};return}typeof r=="function"&&(u=r,r=s.keys(i.events).join(" "));for(var n=r.split(" "),m=0;m<n.length;m++){var f=i.events[n[m]],t=[];if(u&&f)for(var l=0;l<f.length;l++)f[l]!==u&&t.push(f[l]);i.events[n[m]]=t}},e.trigger=function(i,r,u){var n,m,f,t,l=i.events;if(l&&s.keys(l).length>0){u||(u={}),n=r.split(" ");for(var o=0;o<n.length;o++)if(m=n[o],f=l[m],f){t=s.clone(u,!1),t.name=m,t.source=i;for(var h=0;h<f.length;h++)f[h].apply(i,[t])}}}})()},function(w,c,a){var e={};w.exports=e;var s=a(5),i=a(0),r=a(1),u=a(4);(function(){e.create=function(n){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},e.setModified=function(n,m,f,t){if(n.isModified=m,m&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),f&&n.parent&&e.setModified(n.parent,m,f,t),t)for(var l=0;l<n.composites.length;l++){var o=n.composites[l];e.setModified(o,m,f,t)}},e.add=function(n,m){var f=[].concat(m);s.trigger(n,"beforeAdd",{object:m});for(var t=0;t<f.length;t++){var l=f[t];switch(l.type){case"body":if(l.parent!==l){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(n,l);break;case"constraint":e.addConstraint(n,l);break;case"composite":e.addComposite(n,l);break;case"mouseConstraint":e.addConstraint(n,l.constraint);break}}return s.trigger(n,"afterAdd",{object:m}),n},e.remove=function(n,m,f){var t=[].concat(m);s.trigger(n,"beforeRemove",{object:m});for(var l=0;l<t.length;l++){var o=t[l];switch(o.type){case"body":e.removeBody(n,o,f);break;case"constraint":e.removeConstraint(n,o,f);break;case"composite":e.removeComposite(n,o,f);break;case"mouseConstraint":e.removeConstraint(n,o.constraint);break}}return s.trigger(n,"afterRemove",{object:m}),n},e.addComposite=function(n,m){return n.composites.push(m),m.parent=n,e.setModified(n,!0,!0,!1),n},e.removeComposite=function(n,m,f){var t=i.indexOf(n.composites,m);if(t!==-1){var l=e.allBodies(m);e.removeCompositeAt(n,t);for(var o=0;o<l.length;o++)l[o].sleepCounter=0}if(f)for(var o=0;o<n.composites.length;o++)e.removeComposite(n.composites[o],m,!0);return n},e.removeCompositeAt=function(n,m){return n.composites.splice(m,1),e.setModified(n,!0,!0,!1),n},e.addBody=function(n,m){return n.bodies.push(m),e.setModified(n,!0,!0,!1),n},e.removeBody=function(n,m,f){var t=i.indexOf(n.bodies,m);if(t!==-1&&(e.removeBodyAt(n,t),m.sleepCounter=0),f)for(var l=0;l<n.composites.length;l++)e.removeBody(n.composites[l],m,!0);return n},e.removeBodyAt=function(n,m){return n.bodies.splice(m,1),e.setModified(n,!0,!0,!1),n},e.addConstraint=function(n,m){return n.constraints.push(m),e.setModified(n,!0,!0,!1),n},e.removeConstraint=function(n,m,f){var t=i.indexOf(n.constraints,m);if(t!==-1&&e.removeConstraintAt(n,t),f)for(var l=0;l<n.composites.length;l++)e.removeConstraint(n.composites[l],m,!0);return n},e.removeConstraintAt=function(n,m){return n.constraints.splice(m,1),e.setModified(n,!0,!0,!1),n},e.clear=function(n,m,f){if(f)for(var t=0;t<n.composites.length;t++)e.clear(n.composites[t],m,!0);return m?n.bodies=n.bodies.filter(function(l){return l.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,e.setModified(n,!0,!0,!1),n},e.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var m=[].concat(n.bodies),f=0;f<n.composites.length;f++)m=m.concat(e.allBodies(n.composites[f]));return n.cache&&(n.cache.allBodies=m),m},e.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var m=[].concat(n.constraints),f=0;f<n.composites.length;f++)m=m.concat(e.allConstraints(n.composites[f]));return n.cache&&(n.cache.allConstraints=m),m},e.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var m=[].concat(n.composites),f=0;f<n.composites.length;f++)m=m.concat(e.allComposites(n.composites[f]));return n.cache&&(n.cache.allComposites=m),m},e.get=function(n,m,f){var t,l;switch(f){case"body":t=e.allBodies(n);break;case"constraint":t=e.allConstraints(n);break;case"composite":t=e.allComposites(n).concat(n);break}return t?(l=t.filter(function(o){return o.id.toString()===m.toString()}),l.length===0?null:l[0]):null},e.move=function(n,m,f){return e.remove(n,m),e.add(f,m),n},e.rebase=function(n){for(var m=e.allBodies(n).concat(e.allConstraints(n)).concat(e.allComposites(n)),f=0;f<m.length;f++)m[f].id=i.nextId();return n},e.translate=function(n,m,f){for(var t=f?e.allBodies(n):n.bodies,l=0;l<t.length;l++)u.translate(t[l],m);return n},e.rotate=function(n,m,f,t){for(var l=Math.cos(m),o=Math.sin(m),h=t?e.allBodies(n):n.bodies,v=0;v<h.length;v++){var y=h[v],A=y.position.x-f.x,P=y.position.y-f.y;u.setPosition(y,{x:f.x+(A*l-P*o),y:f.y+(A*o+P*l)}),u.rotate(y,m)}return n},e.scale=function(n,m,f,t,l){for(var o=l?e.allBodies(n):n.bodies,h=0;h<o.length;h++){var v=o[h],y=v.position.x-t.x,A=v.position.y-t.y;u.setPosition(v,{x:t.x+y*m,y:t.y+A*f}),u.scale(v,m,f)}return n},e.bounds=function(n){for(var m=e.allBodies(n),f=[],t=0;t<m.length;t+=1){var l=m[t];f.push(l.bounds.min,l.bounds.max)}return r.create(f)}})()},function(w,c,a){var e={};w.exports=e;var s=a(4),i=a(5),r=a(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(u,n){for(var m=n/r._baseDelta,f=e._motionSleepThreshold,t=0;t<u.length;t++){var l=u[t],o=s.getSpeed(l),h=s.getAngularSpeed(l),v=o*o+h*h;if(l.force.x!==0||l.force.y!==0){e.set(l,!1);continue}var y=Math.min(l.motion,v),A=Math.max(l.motion,v);l.motion=e._minBias*y+(1-e._minBias)*A,l.sleepThreshold>0&&l.motion<f?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/m&&e.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},e.afterCollisions=function(u){for(var n=e._motionSleepThreshold,m=0;m<u.length;m++){var f=u[m];if(f.isActive){var t=f.collision,l=t.bodyA.parent,o=t.bodyB.parent;if(!(l.isSleeping&&o.isSleeping||l.isStatic||o.isStatic)&&(l.isSleeping||o.isSleeping)){var h=l.isSleeping&&!l.isStatic?l:o,v=h===l?o:l;!h.isStatic&&v.motion>n&&e.set(h,!1)}}}},e.set=function(u,n){var m=u.isSleeping;n?(u.isSleeping=!0,u.sleepCounter=u.sleepThreshold,u.positionImpulse.x=0,u.positionImpulse.y=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.speed=0,u.angularSpeed=0,u.motion=0,m||i.trigger(u,"sleepStart")):(u.isSleeping=!1,u.sleepCounter=0,m&&i.trigger(u,"sleepEnd"))}})()},function(w,c,a){var e={};w.exports=e;var s=a(3),i=a(9);(function(){var r=[],u={overlap:0,axis:null},n={overlap:0,axis:null};e.create=function(m,f){return{pair:null,collided:!1,bodyA:m,bodyB:f,parentA:m.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(m,f,t){if(e._overlapAxes(u,m.vertices,f.vertices,m.axes),u.overlap<=0||(e._overlapAxes(n,f.vertices,m.vertices,f.axes),n.overlap<=0))return null;var l=t&&t.table[i.id(m,f)],o;l?o=l.collision:(o=e.create(m,f),o.collided=!0,o.bodyA=m.id<f.id?m:f,o.bodyB=m.id<f.id?f:m,o.parentA=o.bodyA.parent,o.parentB=o.bodyB.parent),m=o.bodyA,f=o.bodyB;var h;u.overlap<n.overlap?h=u:h=n;var v=o.normal,y=o.tangent,A=o.penetration,P=o.supports,p=h.overlap,g=h.axis,x=g.x,d=g.y,C=f.position.x-m.position.x,M=f.position.y-m.position.y;x*C+d*M>=0&&(x=-x,d=-d),v.x=x,v.y=d,y.x=-d,y.y=x,A.x=x*p,A.y=d*p,o.depth=p;var S=e._findSupports(m,f,v,1),E=0;if(s.contains(m.vertices,S[0])&&(P[E++]=S[0]),s.contains(m.vertices,S[1])&&(P[E++]=S[1]),E<2){var T=e._findSupports(f,m,v,-1);s.contains(f.vertices,T[0])&&(P[E++]=T[0]),E<2&&s.contains(f.vertices,T[1])&&(P[E++]=T[1])}return E===0&&(P[E++]=S[0]),o.supportCount=E,o},e._overlapAxes=function(m,f,t,l){var o=f.length,h=t.length,v=f[0].x,y=f[0].y,A=t[0].x,P=t[0].y,p=l.length,g=Number.MAX_VALUE,x=0,d,C,M,S,E,T;for(E=0;E<p;E++){var I=l[E],R=I.x,b=I.y,B=v*R+y*b,D=A*R+P*b,k=B,H=D;for(T=1;T<o;T+=1)S=f[T].x*R+f[T].y*b,S>k?k=S:S<B&&(B=S);for(T=1;T<h;T+=1)S=t[T].x*R+t[T].y*b,S>H?H=S:S<D&&(D=S);if(C=k-D,M=H-B,d=C<M?C:M,d<g&&(g=d,x=E,d<=0))break}m.axis=l[x],m.overlap=g},e._findSupports=function(m,f,t,l){var o=f.vertices,h=o.length,v=m.position.x,y=m.position.y,A=t.x*l,P=t.y*l,p=o[0],g=p,x=A*(v-g.x)+P*(y-g.y),d,C,M;for(M=1;M<h;M+=1)g=o[M],C=A*(v-g.x)+P*(y-g.y),C<x&&(x=C,p=g);return d=o[(h+p.index-1)%h],x=A*(v-d.x)+P*(y-d.y),g=o[(p.index+1)%h],A*(v-g.x)+P*(y-g.y)<x?(r[0]=p,r[1]=g,r):(r[0]=p,r[1]=d,r)}})()},function(w,c,a){var e={};w.exports=e;var s=a(16);(function(){e.create=function(i,r){var u=i.bodyA,n=i.bodyB,m={id:e.id(u,n),bodyA:u,bodyB:n,collision:i,contacts:[s.create(),s.create()],contactCount:0,separation:0,isActive:!0,isSensor:u.isSensor||n.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(m,i,r),m},e.update=function(i,r,u){var n=r.supports,m=r.supportCount,f=i.contacts,t=r.parentA,l=r.parentB;i.isActive=!0,i.timeUpdated=u,i.collision=r,i.separation=r.depth,i.inverseMass=t.inverseMass+l.inverseMass,i.friction=t.friction<l.friction?t.friction:l.friction,i.frictionStatic=t.frictionStatic>l.frictionStatic?t.frictionStatic:l.frictionStatic,i.restitution=t.restitution>l.restitution?t.restitution:l.restitution,i.slop=t.slop>l.slop?t.slop:l.slop,i.contactCount=m,r.pair=i;var o=n[0],h=f[0],v=n[1],y=f[1];(y.vertex===o||h.vertex===v)&&(f[1]=h,f[0]=h=y,y=f[1]),h.vertex=o,y.vertex=v},e.setActive=function(i,r,u){r?(i.isActive=!0,i.timeUpdated=u):(i.isActive=!1,i.contactCount=0)},e.id=function(i,r){return i.id<r.id?i.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+i.id.toString(36)}})()},function(w,c,a){var e={};w.exports=e;var s=a(3),i=a(2),r=a(7),u=a(1),n=a(11),m=a(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(f){var t=f;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var l=t.bodyA?i.add(t.bodyA.position,t.pointA):t.pointA,o=t.bodyB?i.add(t.bodyB.position,t.pointB):t.pointB,h=i.magnitude(i.sub(l,o));t.length=typeof t.length!="undefined"?t.length:h,t.id=t.id||m.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var v={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(v.type="pin",v.anchors=!1):t.stiffness<.9&&(v.type="spring"),t.render=m.extend(v,t.render),t},e.preSolveAll=function(f){for(var t=0;t<f.length;t+=1){var l=f[t],o=l.constraintImpulse;l.isStatic||o.x===0&&o.y===0&&o.angle===0||(l.position.x+=o.x,l.position.y+=o.y,l.angle+=o.angle)}},e.solveAll=function(f,t){for(var l=m.clamp(t/m._baseDelta,0,1),o=0;o<f.length;o+=1){var h=f[o],v=!h.bodyA||h.bodyA&&h.bodyA.isStatic,y=!h.bodyB||h.bodyB&&h.bodyB.isStatic;(v||y)&&e.solve(f[o],l)}for(o=0;o<f.length;o+=1)h=f[o],v=!h.bodyA||h.bodyA&&h.bodyA.isStatic,y=!h.bodyB||h.bodyB&&h.bodyB.isStatic,!v&&!y&&e.solve(f[o],l)},e.solve=function(f,t){var l=f.bodyA,o=f.bodyB,h=f.pointA,v=f.pointB;if(!(!l&&!o)){l&&!l.isStatic&&(i.rotate(h,l.angle-f.angleA,h),f.angleA=l.angle),o&&!o.isStatic&&(i.rotate(v,o.angle-f.angleB,v),f.angleB=o.angle);var y=h,A=v;if(l&&(y=i.add(l.position,h)),o&&(A=i.add(o.position,v)),!(!y||!A)){var P=i.sub(y,A),p=i.magnitude(P);p<e._minLength&&(p=e._minLength);var g=(p-f.length)/p,x=f.stiffness>=1||f.length===0,d=x?f.stiffness*t:f.stiffness*t*t,C=f.damping*t,M=i.mult(P,g*d),S=(l?l.inverseMass:0)+(o?o.inverseMass:0),E=(l?l.inverseInertia:0)+(o?o.inverseInertia:0),T=S+E,I,R,b,B,D;if(C>0){var k=i.create();b=i.div(P,p),D=i.sub(o&&i.sub(o.position,o.positionPrev)||k,l&&i.sub(l.position,l.positionPrev)||k),B=i.dot(b,D)}l&&!l.isStatic&&(R=l.inverseMass/S,l.constraintImpulse.x-=M.x*R,l.constraintImpulse.y-=M.y*R,l.position.x-=M.x*R,l.position.y-=M.y*R,C>0&&(l.positionPrev.x-=C*b.x*B*R,l.positionPrev.y-=C*b.y*B*R),I=i.cross(h,M)/T*e._torqueDampen*l.inverseInertia*(1-f.angularStiffness),l.constraintImpulse.angle-=I,l.angle-=I),o&&!o.isStatic&&(R=o.inverseMass/S,o.constraintImpulse.x+=M.x*R,o.constraintImpulse.y+=M.y*R,o.position.x+=M.x*R,o.position.y+=M.y*R,C>0&&(o.positionPrev.x+=C*b.x*B*R,o.positionPrev.y+=C*b.y*B*R),I=i.cross(v,M)/T*e._torqueDampen*o.inverseInertia*(1-f.angularStiffness),o.constraintImpulse.angle+=I,o.angle+=I)}}},e.postSolveAll=function(f){for(var t=0;t<f.length;t++){var l=f[t],o=l.constraintImpulse;if(!(l.isStatic||o.x===0&&o.y===0&&o.angle===0)){r.set(l,!1);for(var h=0;h<l.parts.length;h++){var v=l.parts[h];s.translate(v.vertices,o),h>0&&(v.position.x+=o.x,v.position.y+=o.y),o.angle!==0&&(s.rotate(v.vertices,o.angle,l.position),n.rotate(v.axes,o.angle),h>0&&i.rotateAbout(v.position,o.angle,l.position,v.position)),u.update(v.bounds,v.vertices,l.velocity)}o.angle*=e._warming,o.x*=e._warming,o.y*=e._warming}}},e.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},e.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},e.currentLength=function(f){var t=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),l=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),o=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),h=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),v=t-o,y=l-h;return Math.sqrt(v*v+y*y)}})()},function(w,c,a){var e={};w.exports=e;var s=a(2),i=a(0);(function(){e.fromVertices=function(r){for(var u={},n=0;n<r.length;n++){var m=(n+1)%r.length,f=s.normalise({x:r[m].y-r[n].y,y:r[n].x-r[m].x}),t=f.y===0?1/0:f.x/f.y;t=t.toFixed(3).toString(),u[t]=f}return i.values(u)},e.rotate=function(r,u){if(u!==0)for(var n=Math.cos(u),m=Math.sin(u),f=0;f<r.length;f++){var t=r[f],l;l=t.x*n-t.y*m,t.y=t.x*m+t.y*n,t.x=l}}})()},function(w,c,a){var e={};w.exports=e;var s=a(3),i=a(0),r=a(4),u=a(1),n=a(2);(function(){e.rectangle=function(m,f,t,l,o){o=o||{};var h={label:"Rectangle Body",position:{x:m,y:f},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+l+" L 0 "+l)};if(o.chamfer){var v=o.chamfer;h.vertices=s.chamfer(h.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete o.chamfer}return r.create(i.extend({},h,o))},e.trapezoid=function(m,f,t,l,o,h){h=h||{},o>=1&&i.warn("Bodies.trapezoid: slope parameter must be < 1."),o*=.5;var v=(1-o*2)*t,y=t*o,A=y+v,P=A+y,p;o<.5?p="L 0 0 L "+y+" "+-l+" L "+A+" "+-l+" L "+P+" 0":p="L 0 0 L "+A+" "+-l+" L "+P+" 0";var g={label:"Trapezoid Body",position:{x:m,y:f},vertices:s.fromPath(p)};if(h.chamfer){var x=h.chamfer;g.vertices=s.chamfer(g.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete h.chamfer}return r.create(i.extend({},g,h))},e.circle=function(m,f,t,l,o){l=l||{};var h={label:"Circle Body",circleRadius:t};o=o||25;var v=Math.ceil(Math.max(10,Math.min(o,t)));return v%2===1&&(v+=1),e.polygon(m,f,v,t,i.extend({},h,l))},e.polygon=function(m,f,t,l,o){if(o=o||{},t<3)return e.circle(m,f,l,o);for(var h=2*Math.PI/t,v="",y=h*.5,A=0;A<t;A+=1){var P=y+A*h,p=Math.cos(P)*l,g=Math.sin(P)*l;v+="L "+p.toFixed(3)+" "+g.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:m,y:f},vertices:s.fromPath(v)};if(o.chamfer){var d=o.chamfer;x.vertices=s.chamfer(x.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete o.chamfer}return r.create(i.extend({},x,o))},e.fromVertices=function(m,f,t,l,o,h,v,y){var A=i.getDecomp(),P,p,g,x,d,C,M,S,E,T,I;for(P=!!(A&&A.quickDecomp),l=l||{},g=[],o=typeof o!="undefined"?o:!1,h=typeof h!="undefined"?h:.01,v=typeof v!="undefined"?v:10,y=typeof y!="undefined"?y:.01,i.isArray(t[0])||(t=[t]),T=0;T<t.length;T+=1)if(C=t[T],x=s.isConvex(C),d=!x,d&&!P&&i.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!P)x?C=s.clockwiseSort(C):C=s.hull(C),g.push({position:{x:m,y:f},vertices:C});else{var R=C.map(function(F){return[F.x,F.y]});A.makeCCW(R),h!==!1&&A.removeCollinearPoints(R,h),y!==!1&&A.removeDuplicatePoints&&A.removeDuplicatePoints(R,y);var b=A.quickDecomp(R);for(M=0;M<b.length;M++){var B=b[M],D=B.map(function(F){return{x:F[0],y:F[1]}});v>0&&s.area(D)<v||g.push({position:s.centre(D),vertices:D})}}for(M=0;M<g.length;M++)g[M]=r.create(i.extend(g[M],l));if(o){var k=5;for(M=0;M<g.length;M++){var H=g[M];for(S=M+1;S<g.length;S++){var O=g[S];if(u.overlaps(H.bounds,O.bounds)){var N=H.vertices,U=O.vertices;for(E=0;E<H.vertices.length;E++)for(I=0;I<O.vertices.length;I++){var $=n.magnitudeSquared(n.sub(N[(E+1)%N.length],U[I])),X=n.magnitudeSquared(n.sub(N[E],U[(I+1)%U.length]));$<k&&X<k&&(N[E].isInternal=!0,U[I].isInternal=!0)}}}}}return g.length>1?(p=r.create(i.extend({parts:g.slice(0)},l)),r.setPosition(p,{x:m,y:f}),p):g[0]}})()},function(w,c,a){var e={};w.exports=e;var s=a(0),i=a(8);(function(){e.create=function(r){var u={bodies:[],collisions:[],pairs:null};return s.extend(u,r)},e.setBodies=function(r,u){r.bodies=u.slice(0)},e.clear=function(r){r.bodies=[],r.collisions=[]},e.collisions=function(r){var u=r.pairs,n=r.bodies,m=n.length,f=e.canCollide,t=i.collides,l=r.collisions,o=0,h,v;for(n.sort(e._compareBoundsX),h=0;h<m;h++){var y=n[h],A=y.bounds,P=y.bounds.max.x,p=y.bounds.max.y,g=y.bounds.min.y,x=y.isStatic||y.isSleeping,d=y.parts.length,C=d===1;for(v=h+1;v<m;v++){var M=n[v],S=M.bounds;if(S.min.x>P)break;if(!(p<S.min.y||g>S.max.y)&&!(x&&(M.isStatic||M.isSleeping))&&f(y.collisionFilter,M.collisionFilter)){var E=M.parts.length;if(C&&E===1){var T=t(y,M,u);T&&(l[o++]=T)}else for(var I=d>1?1:0,R=E>1?1:0,b=I;b<d;b++)for(var B=y.parts[b],A=B.bounds,D=R;D<E;D++){var k=M.parts[D],S=k.bounds;if(!(A.min.x>S.max.x||A.max.x<S.min.x||A.max.y<S.min.y||A.min.y>S.max.y)){var T=t(B,k,u);T&&(l[o++]=T)}}}}}return l.length!==o&&(l.length=o),l},e.canCollide=function(r,u){return r.group===u.group&&r.group!==0?r.group>0:(r.mask&u.category)!==0&&(u.mask&r.category)!==0},e._compareBoundsX=function(r,u){return r.bounds.min.x-u.bounds.min.x}})()},function(w,c,a){var e={};w.exports=e;var s=a(0);(function(){e.create=function(i){var r={};return i||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),r.element=i||document.body,r.absolute={x:0,y:0},r.position={x:0,y:0},r.mousedownPosition={x:0,y:0},r.mouseupPosition={x:0,y:0},r.offset={x:0,y:0},r.scale={x:1,y:1},r.wheelDelta=0,r.button=-1,r.pixelRatio=parseInt(r.element.getAttribute("data-pixel-ratio"),10)||1,r.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},r.mousemove=function(u){var n=e._getRelativeMousePosition(u,r.element,r.pixelRatio),m=u.changedTouches;m&&(r.button=0,u.preventDefault()),r.absolute.x=n.x,r.absolute.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.sourceEvents.mousemove=u},r.mousedown=function(u){var n=e._getRelativeMousePosition(u,r.element,r.pixelRatio),m=u.changedTouches;m?(r.button=0,u.preventDefault()):r.button=u.button,r.absolute.x=n.x,r.absolute.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mousedownPosition.x=r.position.x,r.mousedownPosition.y=r.position.y,r.sourceEvents.mousedown=u},r.mouseup=function(u){var n=e._getRelativeMousePosition(u,r.element,r.pixelRatio),m=u.changedTouches;m&&u.preventDefault(),r.button=-1,r.absolute.x=n.x,r.absolute.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mouseupPosition.x=r.position.x,r.mouseupPosition.y=r.position.y,r.sourceEvents.mouseup=u},r.mousewheel=function(u){r.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault(),r.sourceEvents.mousewheel=u},e.setElement(r,r.element),r},e.setElement=function(i,r){i.element=r,r.addEventListener("mousemove",i.mousemove,{passive:!0}),r.addEventListener("mousedown",i.mousedown,{passive:!0}),r.addEventListener("mouseup",i.mouseup,{passive:!0}),r.addEventListener("wheel",i.mousewheel,{passive:!1}),r.addEventListener("touchmove",i.mousemove,{passive:!1}),r.addEventListener("touchstart",i.mousedown,{passive:!1}),r.addEventListener("touchend",i.mouseup,{passive:!1})},e.clearSourceEvents=function(i){i.sourceEvents.mousemove=null,i.sourceEvents.mousedown=null,i.sourceEvents.mouseup=null,i.sourceEvents.mousewheel=null,i.wheelDelta=0},e.setOffset=function(i,r){i.offset.x=r.x,i.offset.y=r.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e.setScale=function(i,r){i.scale.x=r.x,i.scale.y=r.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e._getRelativeMousePosition=function(i,r,u){var n=r.getBoundingClientRect(),m=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:m.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:m.scrollTop,l=i.changedTouches,o,h;return l?(o=l[0].pageX-n.left-f,h=l[0].pageY-n.top-t):(o=i.pageX-n.left-f,h=i.pageY-n.top-t),{x:o/(r.clientWidth/(r.width||r.clientWidth)*u),y:h/(r.clientHeight/(r.height||r.clientHeight)*u)}}})()},function(w,c,a){var e={};w.exports=e;var s=a(0);(function(){e._registry={},e.register=function(i){if(e.isPlugin(i)||s.warn("Plugin.register:",e.toString(i),"does not implement all required fields."),i.name in e._registry){var r=e._registry[i.name],u=e.versionParse(i.version).number,n=e.versionParse(r.version).number;u>n?(s.warn("Plugin.register:",e.toString(r),"was upgraded to",e.toString(i)),e._registry[i.name]=i):u<n?s.warn("Plugin.register:",e.toString(r),"can not be downgraded to",e.toString(i)):i!==r&&s.warn("Plugin.register:",e.toString(i),"is already registered to different plugin object")}else e._registry[i.name]=i;return i},e.resolve=function(i){return e._registry[e.dependencyParse(i).name]},e.toString=function(i){return typeof i=="string"?i:(i.name||"anonymous")+"@"+(i.version||i.range||"0.0.0")},e.isPlugin=function(i){return i&&i.name&&i.version&&i.install},e.isUsed=function(i,r){return i.used.indexOf(r)>-1},e.isFor=function(i,r){var u=i.for&&e.dependencyParse(i.for);return!i.for||r.name===u.name&&e.versionSatisfies(r.version,u.range)},e.use=function(i,r){if(i.uses=(i.uses||[]).concat(r||[]),i.uses.length===0){s.warn("Plugin.use:",e.toString(i),"does not specify any dependencies to install.");return}for(var u=e.dependencies(i),n=s.topologicalSort(u),m=[],f=0;f<n.length;f+=1)if(n[f]!==i.name){var t=e.resolve(n[f]);if(!t){m.push("\u274C "+n[f]);continue}e.isUsed(i,t.name)||(e.isFor(t,i)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(i)+"."),t._warned=!0),t.install?t.install(i):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(m.push("\u{1F536} "+e.toString(t)),delete t._warned):m.push("\u2705 "+e.toString(t)),i.used.push(t.name))}m.length>0&&s.info(m.join("  "))},e.dependencies=function(i,r){var u=e.dependencyParse(i),n=u.name;if(r=r||{},!(n in r)){i=e.resolve(i)||i,r[n]=s.map(i.uses||[],function(f){e.isPlugin(f)&&e.register(f);var t=e.dependencyParse(f),l=e.resolve(f);return l&&!e.versionSatisfies(l.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(l),"does not satisfy",e.toString(t),"used by",e.toString(u)+"."),l._warned=!0,i._warned=!0):l||(s.warn("Plugin.dependencies:",e.toString(f),"used by",e.toString(u),"could not be resolved."),i._warned=!0),t.name});for(var m=0;m<r[n].length;m+=1)e.dependencies(r[n][m],r);return r}},e.dependencyParse=function(i){if(s.isString(i)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(i)||s.warn("Plugin.dependencyParse:",i,"is not a valid dependency string."),{name:i.split("@")[0],range:i.split("@")[1]||"*"}}return{name:i.name,range:i.range||i.version}},e.versionParse=function(i){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(i)||s.warn("Plugin.versionParse:",i,"is not a valid version or range.");var u=r.exec(i),n=Number(u[4]),m=Number(u[5]),f=Number(u[6]);return{isRange:!!(u[1]||u[2]),version:u[3],range:i,operator:u[1]||u[2]||"",major:n,minor:m,patch:f,parts:[n,m,f],prerelease:u[7],number:n*1e8+m*1e4+f}},e.versionSatisfies=function(i,r){r=r||"*";var u=e.versionParse(r),n=e.versionParse(i);if(u.isRange){if(u.operator==="*"||i==="*")return!0;if(u.operator===">")return n.number>u.number;if(u.operator===">=")return n.number>=u.number;if(u.operator==="~")return n.major===u.major&&n.minor===u.minor&&n.patch>=u.patch;if(u.operator==="^")return u.major>0?n.major===u.major&&n.number>=u.number:u.minor>0?n.minor===u.minor&&n.patch>=u.patch:n.patch===u.patch}return i===r||i==="*"}})()},function(w,c){var a={};w.exports=a,function(){a.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(w,c,a){var e={};w.exports=e;var s=a(7),i=a(18),r=a(13),u=a(19),n=a(5),m=a(6),f=a(10),t=a(0),l=a(4);(function(){e._deltaMax=1e3/60,e.create=function(o){o=o||{};var h={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},v=t.extend(h,o);return v.world=o.world||m.create({label:"World"}),v.pairs=o.pairs||u.create(),v.detector=o.detector||r.create(),v.detector.pairs=v.pairs,v.grid={buckets:[]},v.world.gravity=v.gravity,v.broadphase=v.grid,v.metrics={},v},e.update=function(o,h){var v=t.now(),y=o.world,A=o.detector,P=o.pairs,p=o.timing,g=p.timestamp,x;h>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),h=typeof h!="undefined"?h:t._baseDelta,h*=p.timeScale,p.timestamp+=h,p.lastDelta=h;var d={timestamp:p.timestamp,delta:h};n.trigger(o,"beforeUpdate",d);var C=m.allBodies(y),M=m.allConstraints(y);for(y.isModified&&(r.setBodies(A,C),m.setModified(y,!1,!1,!0)),o.enableSleeping&&s.update(C,h),e._bodiesApplyGravity(C,o.gravity),h>0&&e._bodiesUpdate(C,h),n.trigger(o,"beforeSolve",d),f.preSolveAll(C),x=0;x<o.constraintIterations;x++)f.solveAll(M,h);f.postSolveAll(C);var S=r.collisions(A);u.update(P,S,g),o.enableSleeping&&s.afterCollisions(P.list),P.collisionStart.length>0&&n.trigger(o,"collisionStart",{pairs:P.collisionStart,timestamp:p.timestamp,delta:h});var E=t.clamp(20/o.positionIterations,0,1);for(i.preSolvePosition(P.list),x=0;x<o.positionIterations;x++)i.solvePosition(P.list,h,E);for(i.postSolvePosition(C),f.preSolveAll(C),x=0;x<o.constraintIterations;x++)f.solveAll(M,h);for(f.postSolveAll(C),i.preSolveVelocity(P.list),x=0;x<o.velocityIterations;x++)i.solveVelocity(P.list,h);return e._bodiesUpdateVelocities(C),P.collisionActive.length>0&&n.trigger(o,"collisionActive",{pairs:P.collisionActive,timestamp:p.timestamp,delta:h}),P.collisionEnd.length>0&&n.trigger(o,"collisionEnd",{pairs:P.collisionEnd,timestamp:p.timestamp,delta:h}),e._bodiesClearForces(C),n.trigger(o,"afterUpdate",d),o.timing.lastElapsed=t.now()-v,o},e.merge=function(o,h){if(t.extend(o,h),h.world){o.world=h.world,e.clear(o);for(var v=m.allBodies(o.world),y=0;y<v.length;y++){var A=v[y];s.set(A,!1),A.id=t.nextId()}}},e.clear=function(o){u.clear(o.pairs),r.clear(o.detector)},e._bodiesClearForces=function(o){for(var h=o.length,v=0;v<h;v++){var y=o[v];y.force.x=0,y.force.y=0,y.torque=0}},e._bodiesApplyGravity=function(o,h){var v=typeof h.scale!="undefined"?h.scale:.001,y=o.length;if(!(h.x===0&&h.y===0||v===0))for(var A=0;A<y;A++){var P=o[A];P.isStatic||P.isSleeping||(P.force.y+=P.mass*h.y*v,P.force.x+=P.mass*h.x*v)}},e._bodiesUpdate=function(o,h){for(var v=o.length,y=0;y<v;y++){var A=o[y];A.isStatic||A.isSleeping||l.update(A,h)}},e._bodiesUpdateVelocities=function(o){for(var h=o.length,v=0;v<h;v++)l.updateVelocities(o[v])}})()},function(w,c,a){var e={};w.exports=e;var s=a(3),i=a(0),r=a(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(u){var n,m,f,t=u.length;for(n=0;n<t;n++)m=u[n],m.isActive&&(f=m.contactCount,m.collision.parentA.totalContacts+=f,m.collision.parentB.totalContacts+=f)},e.solvePosition=function(u,n,m){var f,t,l,o,h,v,y,A,P=e._positionDampen*(m||1),p=i.clamp(n/i._baseDelta,0,1),g=u.length;for(f=0;f<g;f++)t=u[f],!(!t.isActive||t.isSensor)&&(l=t.collision,o=l.parentA,h=l.parentB,v=l.normal,t.separation=l.depth+v.x*(h.positionImpulse.x-o.positionImpulse.x)+v.y*(h.positionImpulse.y-o.positionImpulse.y));for(f=0;f<g;f++)t=u[f],!(!t.isActive||t.isSensor)&&(l=t.collision,o=l.parentA,h=l.parentB,v=l.normal,A=t.separation-t.slop*p,(o.isStatic||h.isStatic)&&(A*=2),o.isStatic||o.isSleeping||(y=P/o.totalContacts,o.positionImpulse.x+=v.x*A*y,o.positionImpulse.y+=v.y*A*y),h.isStatic||h.isSleeping||(y=P/h.totalContacts,h.positionImpulse.x-=v.x*A*y,h.positionImpulse.y-=v.y*A*y))},e.postSolvePosition=function(u){for(var n=e._positionWarming,m=u.length,f=s.translate,t=r.update,l=0;l<m;l++){var o=u[l],h=o.positionImpulse,v=h.x,y=h.y,A=o.velocity;if(o.totalContacts=0,v!==0||y!==0){for(var P=0;P<o.parts.length;P++){var p=o.parts[P];f(p.vertices,h),t(p.bounds,p.vertices,A),p.position.x+=v,p.position.y+=y}o.positionPrev.x+=v,o.positionPrev.y+=y,v*A.x+y*A.y<0?(h.x=0,h.y=0):(h.x*=n,h.y*=n)}}},e.preSolveVelocity=function(u){var n=u.length,m,f;for(m=0;m<n;m++){var t=u[m];if(!(!t.isActive||t.isSensor)){var l=t.contacts,o=t.contactCount,h=t.collision,v=h.parentA,y=h.parentB,A=h.normal,P=h.tangent;for(f=0;f<o;f++){var p=l[f],g=p.vertex,x=p.normalImpulse,d=p.tangentImpulse;if(x!==0||d!==0){var C=A.x*x+P.x*d,M=A.y*x+P.y*d;v.isStatic||v.isSleeping||(v.positionPrev.x+=C*v.inverseMass,v.positionPrev.y+=M*v.inverseMass,v.anglePrev+=v.inverseInertia*((g.x-v.position.x)*M-(g.y-v.position.y)*C)),y.isStatic||y.isSleeping||(y.positionPrev.x-=C*y.inverseMass,y.positionPrev.y-=M*y.inverseMass,y.anglePrev-=y.inverseInertia*((g.x-y.position.x)*M-(g.y-y.position.y)*C))}}}}},e.solveVelocity=function(u,n){var m=n/i._baseDelta,f=m*m,t=f*m,l=-e._restingThresh*m,o=e._restingThreshTangent,h=e._frictionNormalMultiplier*m,v=e._frictionMaxStatic,y=u.length,A,P,p,g;for(p=0;p<y;p++){var x=u[p];if(!(!x.isActive||x.isSensor)){var d=x.collision,C=d.parentA,M=d.parentB,S=d.normal.x,E=d.normal.y,T=d.tangent.x,I=d.tangent.y,R=x.inverseMass,b=x.friction*x.frictionStatic*h,B=x.contacts,D=x.contactCount,k=1/D,H=C.position.x-C.positionPrev.x,O=C.position.y-C.positionPrev.y,N=C.angle-C.anglePrev,U=M.position.x-M.positionPrev.x,$=M.position.y-M.positionPrev.y,X=M.angle-M.anglePrev;for(g=0;g<D;g++){var F=B[g],z=F.vertex,Y=z.x-C.position.x,te=z.y-C.position.y,K=z.x-M.position.x,Z=z.y-M.position.y,V=H-te*N,Qe=O+Y*N,$e=U-Z*X,Je=$+K*X,Le=V-$e,De=Qe-Je,we=S*Le+E*De,Q=T*Le+I*De,ke=x.separation+we,Ie=Math.min(ke,1);Ie=ke<0?0:Ie;var Fe=Ie*b;Q<-Fe||Q>Fe?(P=Q>0?Q:-Q,A=x.friction*(Q>0?1:-1)*t,A<-P?A=-P:A>P&&(A=P)):(A=Q,P=v);var We=Y*E-te*S,He=K*E-Z*S,Oe=k/(R+C.inverseInertia*We*We+M.inverseInertia*He*He),oe=(1+x.restitution)*we*Oe;if(A*=Oe,we<l)F.normalImpulse=0;else{var je=F.normalImpulse;F.normalImpulse+=oe,F.normalImpulse>0&&(F.normalImpulse=0),oe=F.normalImpulse-je}if(Q<-o||Q>o)F.tangentImpulse=0;else{var qe=F.tangentImpulse;F.tangentImpulse+=A,F.tangentImpulse<-P&&(F.tangentImpulse=-P),F.tangentImpulse>P&&(F.tangentImpulse=P),A=F.tangentImpulse-qe}var le=S*oe+T*A,fe=E*oe+I*A;C.isStatic||C.isSleeping||(C.positionPrev.x+=le*C.inverseMass,C.positionPrev.y+=fe*C.inverseMass,C.anglePrev+=(Y*fe-te*le)*C.inverseInertia),M.isStatic||M.isSleeping||(M.positionPrev.x-=le*M.inverseMass,M.positionPrev.y-=fe*M.inverseMass,M.anglePrev-=(K*fe-Z*le)*M.inverseInertia)}}}}})()},function(w,c,a){var e={};w.exports=e;var s=a(9),i=a(0);(function(){e.create=function(r){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},e.update=function(r,u,n){var m=s.update,f=s.create,t=s.setActive,l=r.table,o=r.list,h=o.length,v=h,y=r.collisionStart,A=r.collisionEnd,P=r.collisionActive,p=u.length,g=0,x=0,d=0,C,M,S;for(S=0;S<p;S++)C=u[S],M=C.pair,M?(M.isActive&&(P[d++]=M),m(M,C,n)):(M=f(C,n),l[M.id]=M,y[g++]=M,o[v++]=M);for(v=0,h=o.length,S=0;S<h;S++)M=o[S],M.timeUpdated>=n?o[v++]=M:(t(M,!1,n),M.collision.bodyA.sleepCounter>0&&M.collision.bodyB.sleepCounter>0?o[v++]=M:(A[x++]=M,delete l[M.id]));o.length!==v&&(o.length=v),y.length!==g&&(y.length=g),A.length!==x&&(A.length=x),P.length!==d&&(P.length=d)},e.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},function(w,c,a){var e=w.exports=a(21);e.Axes=a(11),e.Bodies=a(12),e.Body=a(4),e.Bounds=a(1),e.Collision=a(8),e.Common=a(0),e.Composite=a(6),e.Composites=a(22),e.Constraint=a(10),e.Contact=a(16),e.Detector=a(13),e.Engine=a(17),e.Events=a(5),e.Grid=a(23),e.Mouse=a(14),e.MouseConstraint=a(24),e.Pair=a(9),e.Pairs=a(19),e.Plugin=a(15),e.Query=a(25),e.Render=a(26),e.Resolver=a(18),e.Runner=a(27),e.SAT=a(28),e.Sleeping=a(7),e.Svg=a(29),e.Vector=a(2),e.Vertices=a(3),e.World=a(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(w,c,a){var e={};w.exports=e;var s=a(15),i=a(0);(function(){e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,u){return r=r.replace(/^Matter./,""),i.chainPathBefore(e,r,u)},e.after=function(r,u){return r=r.replace(/^Matter./,""),i.chainPathAfter(e,r,u)}})()},function(w,c,a){var e={};w.exports=e;var s=a(6),i=a(10),r=a(0),u=a(4),n=a(12),m=r.deprecated;(function(){e.stack=function(f,t,l,o,h,v,y){for(var A=s.create({label:"Stack"}),P=f,p=t,g,x=0,d=0;d<o;d++){for(var C=0,M=0;M<l;M++){var S=y(P,p,M,d,g,x);if(S){var E=S.bounds.max.y-S.bounds.min.y,T=S.bounds.max.x-S.bounds.min.x;E>C&&(C=E),u.translate(S,{x:T*.5,y:E*.5}),P=S.bounds.max.x+h,s.addBody(A,S),g=S,x+=1}else P+=h}p+=C+v,P=f}return A},e.chain=function(f,t,l,o,h,v){for(var y=f.bodies,A=1;A<y.length;A++){var P=y[A-1],p=y[A],g=P.bounds.max.y-P.bounds.min.y,x=P.bounds.max.x-P.bounds.min.x,d=p.bounds.max.y-p.bounds.min.y,C=p.bounds.max.x-p.bounds.min.x,M={bodyA:P,pointA:{x:x*t,y:g*l},bodyB:p,pointB:{x:C*o,y:d*h}},S=r.extend(M,v);s.addConstraint(f,i.create(S))}return f.label+=" Chain",f},e.mesh=function(f,t,l,o,h){var v=f.bodies,y,A,P,p,g;for(y=0;y<l;y++){for(A=1;A<t;A++)P=v[A-1+y*t],p=v[A+y*t],s.addConstraint(f,i.create(r.extend({bodyA:P,bodyB:p},h)));if(y>0)for(A=0;A<t;A++)P=v[A+(y-1)*t],p=v[A+y*t],s.addConstraint(f,i.create(r.extend({bodyA:P,bodyB:p},h))),o&&A>0&&(g=v[A-1+(y-1)*t],s.addConstraint(f,i.create(r.extend({bodyA:g,bodyB:p},h)))),o&&A<t-1&&(g=v[A+1+(y-1)*t],s.addConstraint(f,i.create(r.extend({bodyA:g,bodyB:p},h))))}return f.label+=" Mesh",f},e.pyramid=function(f,t,l,o,h,v,y){return e.stack(f,t,l,o,h,v,function(A,P,p,g,x,d){var C=Math.min(o,Math.ceil(l/2)),M=x?x.bounds.max.x-x.bounds.min.x:0;if(!(g>C)){g=C-g;var S=g,E=l-1-g;if(!(p<S||p>E)){d===1&&u.translate(x,{x:(p+(l%2===1?1:-1))*M,y:0});var T=x?p*M:0;return y(f+T+p*h,P,p,g,x,d)}}})},e.newtonsCradle=function(f,t,l,o,h){for(var v=s.create({label:"Newtons Cradle"}),y=0;y<l;y++){var A=1.9,P=n.circle(f+y*(o*A),t+h,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),p=i.create({pointA:{x:f+y*(o*A),y:t},bodyB:P});s.addBody(v,P),s.addConstraint(v,p)}return v},m(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(f,t,l,o,h){var v=u.nextGroup(!0),y=20,A=-l*.5+y,P=l*.5-y,p=0,g=s.create({label:"Car"}),x=n.rectangle(f,t,l,o,{collisionFilter:{group:v},chamfer:{radius:o*.5},density:2e-4}),d=n.circle(f+A,t+p,h,{collisionFilter:{group:v},friction:.8}),C=n.circle(f+P,t+p,h,{collisionFilter:{group:v},friction:.8}),M=i.create({bodyB:x,pointB:{x:A,y:p},bodyA:d,stiffness:1,length:0}),S=i.create({bodyB:x,pointB:{x:P,y:p},bodyA:C,stiffness:1,length:0});return s.addBody(g,x),s.addBody(g,d),s.addBody(g,C),s.addConstraint(g,M),s.addConstraint(g,S),g},m(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(f,t,l,o,h,v,y,A,P,p){P=r.extend({inertia:1/0},P),p=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var g=e.stack(f,t,l,o,h,v,function(x,d){return n.circle(x,d,A,P)});return e.mesh(g,l,o,y,p),g.label="Soft Body",g},m(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(w,c,a){var e={};w.exports=e;var s=a(9),i=a(0),r=i.deprecated;(function(){e.create=function(u){var n={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return i.extend(n,u)},e.update=function(u,n,m,f){var t,l,o,h=m.world,v=u.buckets,y,A,P=!1;for(t=0;t<n.length;t++){var p=n[t];if(!(p.isSleeping&&!f)&&!(h.bounds&&(p.bounds.max.x<h.bounds.min.x||p.bounds.min.x>h.bounds.max.x||p.bounds.max.y<h.bounds.min.y||p.bounds.min.y>h.bounds.max.y))){var g=e._getRegion(u,p);if(!p.region||g.id!==p.region.id||f){(!p.region||f)&&(p.region=g);var x=e._regionUnion(g,p.region);for(l=x.startCol;l<=x.endCol;l++)for(o=x.startRow;o<=x.endRow;o++){A=e._getBucketId(l,o),y=v[A];var d=l>=g.startCol&&l<=g.endCol&&o>=g.startRow&&o<=g.endRow,C=l>=p.region.startCol&&l<=p.region.endCol&&o>=p.region.startRow&&o<=p.region.endRow;!d&&C&&C&&y&&e._bucketRemoveBody(u,y,p),(p.region===g||d&&!C||f)&&(y||(y=e._createBucket(v,A)),e._bucketAddBody(u,y,p))}p.region=g,P=!0}}}P&&(u.pairsList=e._createActivePairsList(u))},r(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},r(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(u,n){var m=Math.min(u.startCol,n.startCol),f=Math.max(u.endCol,n.endCol),t=Math.min(u.startRow,n.startRow),l=Math.max(u.endRow,n.endRow);return e._createRegion(m,f,t,l)},e._getRegion=function(u,n){var m=n.bounds,f=Math.floor(m.min.x/u.bucketWidth),t=Math.floor(m.max.x/u.bucketWidth),l=Math.floor(m.min.y/u.bucketHeight),o=Math.floor(m.max.y/u.bucketHeight);return e._createRegion(f,t,l,o)},e._createRegion=function(u,n,m,f){return{id:u+","+n+","+m+","+f,startCol:u,endCol:n,startRow:m,endRow:f}},e._getBucketId=function(u,n){return"C"+u+"R"+n},e._createBucket=function(u,n){var m=u[n]=[];return m},e._bucketAddBody=function(u,n,m){var f=u.pairs,t=s.id,l=n.length,o;for(o=0;o<l;o++){var h=n[o];if(!(m.id===h.id||m.isStatic&&h.isStatic)){var v=t(m,h),y=f[v];y?y[2]+=1:f[v]=[m,h,1]}}n.push(m)},e._bucketRemoveBody=function(u,n,m){var f=u.pairs,t=s.id,l;n.splice(i.indexOf(n,m),1);var o=n.length;for(l=0;l<o;l++){var h=f[t(m,n[l])];h&&(h[2]-=1)}},e._createActivePairsList=function(u){var n,m=u.pairs,f=i.keys(m),t=f.length,l=[],o;for(o=0;o<t;o++)n=m[f[o]],n[2]>0?l.push(n):delete m[f[o]];return l}})()},function(w,c,a){var e={};w.exports=e;var s=a(3),i=a(7),r=a(14),u=a(5),n=a(13),m=a(10),f=a(6),t=a(0),l=a(1);(function(){e.create=function(o,h){var v=(o?o.mouse:null)||(h?h.mouse:null);v||(o&&o.render&&o.render.canvas?v=r.create(o.render.canvas):h&&h.element?v=r.create(h.element):(v=r.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=m.create({label:"Mouse Constraint",pointA:v.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),A={type:"mouseConstraint",mouse:v,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},P=t.extend(A,h);return u.on(o,"beforeUpdate",function(){var p=f.allBodies(o.world);e.update(P,p),e._triggerEvents(P)}),P},e.update=function(o,h){var v=o.mouse,y=o.constraint,A=o.body;if(v.button===0){if(y.bodyB)i.set(y.bodyB,!1),y.pointA=v.position;else for(var P=0;P<h.length;P++)if(A=h[P],l.contains(A.bounds,v.position)&&n.canCollide(A.collisionFilter,o.collisionFilter))for(var p=A.parts.length>1?1:0;p<A.parts.length;p++){var g=A.parts[p];if(s.contains(g.vertices,v.position)){y.pointA=v.position,y.bodyB=o.body=A,y.pointB={x:v.position.x-A.position.x,y:v.position.y-A.position.y},y.angleB=A.angle,i.set(A,!1),u.trigger(o,"startdrag",{mouse:v,body:A});break}}}else y.bodyB=o.body=null,y.pointB=null,A&&u.trigger(o,"enddrag",{mouse:v,body:A})},e._triggerEvents=function(o){var h=o.mouse,v=h.sourceEvents;v.mousemove&&u.trigger(o,"mousemove",{mouse:h}),v.mousedown&&u.trigger(o,"mousedown",{mouse:h}),v.mouseup&&u.trigger(o,"mouseup",{mouse:h}),r.clearSourceEvents(h)}})()},function(w,c,a){var e={};w.exports=e;var s=a(2),i=a(8),r=a(1),u=a(12),n=a(3);(function(){e.collides=function(m,f){for(var t=[],l=f.length,o=m.bounds,h=i.collides,v=r.overlaps,y=0;y<l;y++){var A=f[y],P=A.parts.length,p=P===1?0:1;if(v(A.bounds,o))for(var g=p;g<P;g++){var x=A.parts[g];if(v(x.bounds,o)){var d=h(x,m);if(d){t.push(d);break}}}}return t},e.ray=function(m,f,t,l){l=l||1e-100;for(var o=s.angle(f,t),h=s.magnitude(s.sub(f,t)),v=(t.x+f.x)*.5,y=(t.y+f.y)*.5,A=u.rectangle(v,y,h,l,{angle:o}),P=e.collides(A,m),p=0;p<P.length;p+=1){var g=P[p];g.body=g.bodyB=g.bodyA}return P},e.region=function(m,f,t){for(var l=[],o=0;o<m.length;o++){var h=m[o],v=r.overlaps(h.bounds,f);(v&&!t||!v&&t)&&l.push(h)}return l},e.point=function(m,f){for(var t=[],l=0;l<m.length;l++){var o=m[l];if(r.contains(o.bounds,f))for(var h=o.parts.length===1?0:1;h<o.parts.length;h++){var v=o.parts[h];if(r.contains(v.bounds,f)&&n.contains(v.vertices,f)){t.push(o);break}}}return t}})()},function(w,c,a){var e={};w.exports=e;var s=a(4),i=a(0),r=a(6),u=a(1),n=a(5),m=a(2),f=a(14);(function(){var t,l;typeof window!="undefined"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(p){window.setTimeout(function(){p(i.now())},1e3/60)},l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(p){var g={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!p.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=i.extend(g,p);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=p.mouse,x.engine=p.engine,x.canvas=x.canvas||v(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.controller=e,x.options.showBroadphase=!1,x.options.pixelRatio!==1&&e.setPixelRatio(x,x.options.pixelRatio),i.isElement(x.element)&&x.element.appendChild(x.canvas),x},e.run=function(p){(function g(x){p.frameRequestId=t(g),o(p,x),e.world(p,x),p.context.setTransform(p.options.pixelRatio,0,0,p.options.pixelRatio,0,0),(p.options.showStats||p.options.showDebug)&&e.stats(p,p.context,x),(p.options.showPerformance||p.options.showDebug)&&e.performance(p,p.context,x),p.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(p){l(p.frameRequestId)},e.setPixelRatio=function(p,g){var x=p.options,d=p.canvas;g==="auto"&&(g=y(d)),x.pixelRatio=g,d.setAttribute("data-pixel-ratio",g),d.width=x.width*g,d.height=x.height*g,d.style.width=x.width+"px",d.style.height=x.height+"px"},e.setSize=function(p,g,x){p.options.width=g,p.options.height=x,p.bounds.max.x=p.bounds.min.x+g,p.bounds.max.y=p.bounds.min.y+x,p.options.pixelRatio!==1?e.setPixelRatio(p,p.options.pixelRatio):(p.canvas.width=g,p.canvas.height=x)},e.lookAt=function(p,g,x,d){d=typeof d!="undefined"?d:!0,g=i.isArray(g)?g:[g],x=x||{x:0,y:0};for(var C={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},M=0;M<g.length;M+=1){var S=g[M],E=S.bounds?S.bounds.min:S.min||S.position||S,T=S.bounds?S.bounds.max:S.max||S.position||S;E&&T&&(E.x<C.min.x&&(C.min.x=E.x),T.x>C.max.x&&(C.max.x=T.x),E.y<C.min.y&&(C.min.y=E.y),T.y>C.max.y&&(C.max.y=T.y))}var I=C.max.x-C.min.x+2*x.x,R=C.max.y-C.min.y+2*x.y,b=p.canvas.height,B=p.canvas.width,D=B/b,k=I/R,H=1,O=1;k>D?O=k/D:H=D/k,p.options.hasBounds=!0,p.bounds.min.x=C.min.x,p.bounds.max.x=C.min.x+I*H,p.bounds.min.y=C.min.y,p.bounds.max.y=C.min.y+R*O,d&&(p.bounds.min.x+=I*.5-I*H*.5,p.bounds.max.x+=I*.5-I*H*.5,p.bounds.min.y+=R*.5-R*O*.5,p.bounds.max.y+=R*.5-R*O*.5),p.bounds.min.x-=x.x,p.bounds.max.x-=x.x,p.bounds.min.y-=x.y,p.bounds.max.y-=x.y,p.mouse&&(f.setScale(p.mouse,{x:(p.bounds.max.x-p.bounds.min.x)/p.canvas.width,y:(p.bounds.max.y-p.bounds.min.y)/p.canvas.height}),f.setOffset(p.mouse,p.bounds.min))},e.startViewTransform=function(p){var g=p.bounds.max.x-p.bounds.min.x,x=p.bounds.max.y-p.bounds.min.y,d=g/p.options.width,C=x/p.options.height;p.context.setTransform(p.options.pixelRatio/d,0,0,p.options.pixelRatio/C,0,0),p.context.translate(-p.bounds.min.x,-p.bounds.min.y)},e.endViewTransform=function(p){p.context.setTransform(p.options.pixelRatio,0,0,p.options.pixelRatio,0,0)},e.world=function(p,g){var x=i.now(),d=p.engine,C=d.world,M=p.canvas,S=p.context,E=p.options,T=p.timing,I=r.allBodies(C),R=r.allConstraints(C),b=E.wireframes?E.wireframeBackground:E.background,B=[],D=[],k,H={timestamp:d.timing.timestamp};if(n.trigger(p,"beforeRender",H),p.currentBackground!==b&&P(p,b),S.globalCompositeOperation="source-in",S.fillStyle="transparent",S.fillRect(0,0,M.width,M.height),S.globalCompositeOperation="source-over",E.hasBounds){for(k=0;k<I.length;k++){var O=I[k];u.overlaps(O.bounds,p.bounds)&&B.push(O)}for(k=0;k<R.length;k++){var N=R[k],U=N.bodyA,$=N.bodyB,X=N.pointA,F=N.pointB;U&&(X=m.add(U.position,N.pointA)),$&&(F=m.add($.position,N.pointB)),!(!X||!F)&&(u.contains(p.bounds,X)||u.contains(p.bounds,F))&&D.push(N)}e.startViewTransform(p),p.mouse&&(f.setScale(p.mouse,{x:(p.bounds.max.x-p.bounds.min.x)/p.options.width,y:(p.bounds.max.y-p.bounds.min.y)/p.options.height}),f.setOffset(p.mouse,p.bounds.min))}else D=R,B=I,p.options.pixelRatio!==1&&p.context.setTransform(p.options.pixelRatio,0,0,p.options.pixelRatio,0,0);!E.wireframes||d.enableSleeping&&E.showSleeping?e.bodies(p,B,S):(E.showConvexHulls&&e.bodyConvexHulls(p,B,S),e.bodyWireframes(p,B,S)),E.showBounds&&e.bodyBounds(p,B,S),(E.showAxes||E.showAngleIndicator)&&e.bodyAxes(p,B,S),E.showPositions&&e.bodyPositions(p,B,S),E.showVelocity&&e.bodyVelocity(p,B,S),E.showIds&&e.bodyIds(p,B,S),E.showSeparations&&e.separations(p,d.pairs.list,S),E.showCollisions&&e.collisions(p,d.pairs.list,S),E.showVertexNumbers&&e.vertexNumbers(p,B,S),E.showMousePosition&&e.mousePosition(p,p.mouse,S),e.constraints(D,S),E.hasBounds&&e.endViewTransform(p),n.trigger(p,"afterRender",H),T.lastElapsed=i.now()-x},e.stats=function(p,g,x){for(var d=p.engine,C=d.world,M=r.allBodies(C),S=0,E=55,T=44,I=0,R=0,b=0;b<M.length;b+=1)S+=M[b].parts.length;var B={Part:S,Body:M.length,Cons:r.allConstraints(C).length,Comp:r.allComposites(C).length,Pair:d.pairs.list.length};g.fillStyle="#0e0f19",g.fillRect(I,R,E*5.5,T),g.font="12px Arial",g.textBaseline="top",g.textAlign="right";for(var D in B){var k=B[D];g.fillStyle="#aaa",g.fillText(D,I+E,R+8),g.fillStyle="#eee",g.fillText(k,I+E,R+26),I+=E}},e.performance=function(p,g){var x=p.engine,d=p.timing,C=d.deltaHistory,M=d.elapsedHistory,S=d.timestampElapsedHistory,E=d.engineDeltaHistory,T=d.engineUpdatesHistory,I=d.engineElapsedHistory,R=x.timing.lastUpdatesPerFrame,b=x.timing.lastDelta,B=h(C),D=h(M),k=h(E),H=h(T),O=h(I),N=h(S),U=N/B||0,$=Math.round(B/b),X=1e3/B||0,F=4,z=12,Y=60,te=34,K=10,Z=69;g.fillStyle="#0e0f19",g.fillRect(0,50,z*5+Y*6+22,te),e.status(g,K,Z,Y,F,C.length,Math.round(X)+" fps",X/e._goodFps,function(V){return C[V]/B-1}),e.status(g,K+z+Y,Z,Y,F,E.length,b.toFixed(2)+" dt",e._goodDelta/b,function(V){return E[V]/k-1}),e.status(g,K+(z+Y)*2,Z,Y,F,T.length,R+" upf",Math.pow(i.clamp(H/$||1,0,1),4),function(V){return T[V]/H-1}),e.status(g,K+(z+Y)*3,Z,Y,F,I.length,O.toFixed(2)+" ut",1-R*O/e._goodFps,function(V){return I[V]/O-1}),e.status(g,K+(z+Y)*4,Z,Y,F,M.length,D.toFixed(2)+" rt",1-D/e._goodFps,function(V){return M[V]/D-1}),e.status(g,K+(z+Y)*5,Z,Y,F,S.length,U.toFixed(2)+" x",U*U*U,function(V){return(S[V]/C[V]/U||0)-1})},e.status=function(p,g,x,d,C,M,S,E,T){p.strokeStyle="#888",p.fillStyle="#444",p.lineWidth=1,p.fillRect(g,x+7,d,1),p.beginPath(),p.moveTo(g,x+7-C*i.clamp(.4*T(0),-2,2));for(var I=0;I<d;I+=1)p.lineTo(g+I,x+7-(I<M?C*i.clamp(.4*T(I),-2,2):0));p.stroke(),p.fillStyle="hsl("+i.clamp(25+95*E,0,120)+",100%,60%)",p.fillRect(g,x-7,4,4),p.font="12px Arial",p.textBaseline="middle",p.textAlign="right",p.fillStyle="#eee",p.fillText(S,g+d,x-5)},e.constraints=function(p,g){for(var x=g,d=0;d<p.length;d++){var C=p[d];if(!(!C.render.visible||!C.pointA||!C.pointB)){var M=C.bodyA,S=C.bodyB,E,T;if(M?E=m.add(M.position,C.pointA):E=C.pointA,C.render.type==="pin")x.beginPath(),x.arc(E.x,E.y,3,0,2*Math.PI),x.closePath();else{if(S?T=m.add(S.position,C.pointB):T=C.pointB,x.beginPath(),x.moveTo(E.x,E.y),C.render.type==="spring")for(var I=m.sub(T,E),R=m.perp(m.normalise(I)),b=Math.ceil(i.clamp(C.length/5,12,20)),B,D=1;D<b;D+=1)B=D%2===0?1:-1,x.lineTo(E.x+I.x*(D/b)+R.x*B*4,E.y+I.y*(D/b)+R.y*B*4);x.lineTo(T.x,T.y)}C.render.lineWidth&&(x.lineWidth=C.render.lineWidth,x.strokeStyle=C.render.strokeStyle,x.stroke()),C.render.anchors&&(x.fillStyle=C.render.strokeStyle,x.beginPath(),x.arc(E.x,E.y,3,0,2*Math.PI),x.arc(T.x,T.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},e.bodies=function(p,g,x){var d=x,C=p.engine,M=p.options,S=M.showInternalEdges||!M.wireframes,E,T,I,R;for(I=0;I<g.length;I++)if(E=g[I],!!E.render.visible){for(R=E.parts.length>1?1:0;R<E.parts.length;R++)if(T=E.parts[R],!!T.render.visible){if(M.showSleeping&&E.isSleeping?d.globalAlpha=.5*T.render.opacity:T.render.opacity!==1&&(d.globalAlpha=T.render.opacity),T.render.sprite&&T.render.sprite.texture&&!M.wireframes){var b=T.render.sprite,B=A(p,b.texture);d.translate(T.position.x,T.position.y),d.rotate(T.angle),d.drawImage(B,B.width*-b.xOffset*b.xScale,B.height*-b.yOffset*b.yScale,B.width*b.xScale,B.height*b.yScale),d.rotate(-T.angle),d.translate(-T.position.x,-T.position.y)}else{if(T.circleRadius)d.beginPath(),d.arc(T.position.x,T.position.y,T.circleRadius,0,2*Math.PI);else{d.beginPath(),d.moveTo(T.vertices[0].x,T.vertices[0].y);for(var D=1;D<T.vertices.length;D++)!T.vertices[D-1].isInternal||S?d.lineTo(T.vertices[D].x,T.vertices[D].y):d.moveTo(T.vertices[D].x,T.vertices[D].y),T.vertices[D].isInternal&&!S&&d.moveTo(T.vertices[(D+1)%T.vertices.length].x,T.vertices[(D+1)%T.vertices.length].y);d.lineTo(T.vertices[0].x,T.vertices[0].y),d.closePath()}M.wireframes?(d.lineWidth=1,d.strokeStyle=p.options.wireframeStrokeStyle,d.stroke()):(d.fillStyle=T.render.fillStyle,T.render.lineWidth&&(d.lineWidth=T.render.lineWidth,d.strokeStyle=T.render.strokeStyle,d.stroke()),d.fill())}d.globalAlpha=1}}},e.bodyWireframes=function(p,g,x){var d=x,C=p.options.showInternalEdges,M,S,E,T,I;for(d.beginPath(),E=0;E<g.length;E++)if(M=g[E],!!M.render.visible)for(I=M.parts.length>1?1:0;I<M.parts.length;I++){for(S=M.parts[I],d.moveTo(S.vertices[0].x,S.vertices[0].y),T=1;T<S.vertices.length;T++)!S.vertices[T-1].isInternal||C?d.lineTo(S.vertices[T].x,S.vertices[T].y):d.moveTo(S.vertices[T].x,S.vertices[T].y),S.vertices[T].isInternal&&!C&&d.moveTo(S.vertices[(T+1)%S.vertices.length].x,S.vertices[(T+1)%S.vertices.length].y);d.lineTo(S.vertices[0].x,S.vertices[0].y)}d.lineWidth=1,d.strokeStyle=p.options.wireframeStrokeStyle,d.stroke()},e.bodyConvexHulls=function(p,g,x){var d=x,C,M,S,E,T;for(d.beginPath(),S=0;S<g.length;S++)if(C=g[S],!(!C.render.visible||C.parts.length===1)){for(d.moveTo(C.vertices[0].x,C.vertices[0].y),E=1;E<C.vertices.length;E++)d.lineTo(C.vertices[E].x,C.vertices[E].y);d.lineTo(C.vertices[0].x,C.vertices[0].y)}d.lineWidth=1,d.strokeStyle="rgba(255,255,255,0.2)",d.stroke()},e.vertexNumbers=function(p,g,x){var d=x,C,M,S;for(C=0;C<g.length;C++){var E=g[C].parts;for(S=E.length>1?1:0;S<E.length;S++){var T=E[S];for(M=0;M<T.vertices.length;M++)d.fillStyle="rgba(255,255,255,0.2)",d.fillText(C+"_"+M,T.position.x+(T.vertices[M].x-T.position.x)*.8,T.position.y+(T.vertices[M].y-T.position.y)*.8)}}},e.mousePosition=function(p,g,x){var d=x;d.fillStyle="rgba(255,255,255,0.8)",d.fillText(g.position.x+"  "+g.position.y,g.position.x+5,g.position.y-5)},e.bodyBounds=function(p,g,x){var d=x,C=p.engine,M=p.options;d.beginPath();for(var S=0;S<g.length;S++){var E=g[S];if(E.render.visible)for(var T=g[S].parts,I=T.length>1?1:0;I<T.length;I++){var R=T[I];d.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}M.wireframes?d.strokeStyle="rgba(255,255,255,0.08)":d.strokeStyle="rgba(0,0,0,0.1)",d.lineWidth=1,d.stroke()},e.bodyAxes=function(p,g,x){var d=x,C=p.engine,M=p.options,S,E,T,I;for(d.beginPath(),E=0;E<g.length;E++){var R=g[E],b=R.parts;if(R.render.visible)if(M.showAxes)for(T=b.length>1?1:0;T<b.length;T++)for(S=b[T],I=0;I<S.axes.length;I++){var B=S.axes[I];d.moveTo(S.position.x,S.position.y),d.lineTo(S.position.x+B.x*20,S.position.y+B.y*20)}else for(T=b.length>1?1:0;T<b.length;T++)for(S=b[T],I=0;I<S.axes.length;I++)d.moveTo(S.position.x,S.position.y),d.lineTo((S.vertices[0].x+S.vertices[S.vertices.length-1].x)/2,(S.vertices[0].y+S.vertices[S.vertices.length-1].y)/2)}M.wireframes?(d.strokeStyle="indianred",d.lineWidth=1):(d.strokeStyle="rgba(255, 255, 255, 0.4)",d.globalCompositeOperation="overlay",d.lineWidth=2),d.stroke(),d.globalCompositeOperation="source-over"},e.bodyPositions=function(p,g,x){var d=x,C=p.engine,M=p.options,S,E,T,I;for(d.beginPath(),T=0;T<g.length;T++)if(S=g[T],!!S.render.visible)for(I=0;I<S.parts.length;I++)E=S.parts[I],d.arc(E.position.x,E.position.y,3,0,2*Math.PI,!1),d.closePath();for(M.wireframes?d.fillStyle="indianred":d.fillStyle="rgba(0,0,0,0.5)",d.fill(),d.beginPath(),T=0;T<g.length;T++)S=g[T],S.render.visible&&(d.arc(S.positionPrev.x,S.positionPrev.y,2,0,2*Math.PI,!1),d.closePath());d.fillStyle="rgba(255,165,0,0.8)",d.fill()},e.bodyVelocity=function(p,g,x){var d=x;d.beginPath();for(var C=0;C<g.length;C++){var M=g[C];if(M.render.visible){var S=s.getVelocity(M);d.moveTo(M.position.x,M.position.y),d.lineTo(M.position.x+S.x,M.position.y+S.y)}}d.lineWidth=3,d.strokeStyle="cornflowerblue",d.stroke()},e.bodyIds=function(p,g,x){var d=x,C,M;for(C=0;C<g.length;C++)if(g[C].render.visible){var S=g[C].parts;for(M=S.length>1?1:0;M<S.length;M++){var E=S[M];d.font="12px Arial",d.fillStyle="rgba(255,255,255,0.5)",d.fillText(E.id,E.position.x+10,E.position.y-10)}}},e.collisions=function(p,g,x){var d=x,C=p.options,M,S,E,T,I,R,b;for(d.beginPath(),R=0;R<g.length;R++)if(M=g[R],!!M.isActive)for(S=M.collision,b=0;b<M.contactCount;b++){var B=M.contacts[b],D=B.vertex;d.rect(D.x-1.5,D.y-1.5,3.5,3.5)}for(C.wireframes?d.fillStyle="rgba(255,255,255,0.7)":d.fillStyle="orange",d.fill(),d.beginPath(),R=0;R<g.length;R++)if(M=g[R],!!M.isActive&&(S=M.collision,M.contactCount>0)){var k=M.contacts[0].vertex.x,H=M.contacts[0].vertex.y;M.contactCount===2&&(k=(M.contacts[0].vertex.x+M.contacts[1].vertex.x)/2,H=(M.contacts[0].vertex.y+M.contacts[1].vertex.y)/2),S.bodyB===S.supports[0].body||S.bodyA.isStatic===!0?d.moveTo(k-S.normal.x*8,H-S.normal.y*8):d.moveTo(k+S.normal.x*8,H+S.normal.y*8),d.lineTo(k,H)}C.wireframes?d.strokeStyle="rgba(255,165,0,0.7)":d.strokeStyle="orange",d.lineWidth=1,d.stroke()},e.separations=function(p,g,x){var d=x,C=p.options,M,S,E,T,I,R,b;for(d.beginPath(),R=0;R<g.length;R++)if(M=g[R],!!M.isActive){S=M.collision,T=S.bodyA,I=S.bodyB;var B=1;!I.isStatic&&!T.isStatic&&(B=.5),I.isStatic&&(B=0),d.moveTo(I.position.x,I.position.y),d.lineTo(I.position.x-S.penetration.x*B,I.position.y-S.penetration.y*B),B=1,!I.isStatic&&!T.isStatic&&(B=.5),T.isStatic&&(B=0),d.moveTo(T.position.x,T.position.y),d.lineTo(T.position.x+S.penetration.x*B,T.position.y+S.penetration.y*B)}C.wireframes?d.strokeStyle="rgba(255,165,0,0.5)":d.strokeStyle="orange",d.stroke()},e.inspector=function(p,g){var x=p.engine,d=p.selected,C=p.render,M=C.options,S;if(M.hasBounds){var E=C.bounds.max.x-C.bounds.min.x,T=C.bounds.max.y-C.bounds.min.y,I=E/C.options.width,R=T/C.options.height;g.scale(1/I,1/R),g.translate(-C.bounds.min.x,-C.bounds.min.y)}for(var b=0;b<d.length;b++){var B=d[b].data;switch(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.9)",g.setLineDash([1,2]),B.type){case"body":S=B.bounds,g.beginPath(),g.rect(Math.floor(S.min.x-3),Math.floor(S.min.y-3),Math.floor(S.max.x-S.min.x+6),Math.floor(S.max.y-S.min.y+6)),g.closePath(),g.stroke();break;case"constraint":var D=B.pointA;B.bodyA&&(D=B.pointB),g.beginPath(),g.arc(D.x,D.y,10,0,2*Math.PI),g.closePath(),g.stroke();break}g.setLineDash([]),g.translate(-.5,-.5)}p.selectStart!==null&&(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.6)",g.fillStyle="rgba(255,165,0,0.1)",S=p.selectBounds,g.beginPath(),g.rect(Math.floor(S.min.x),Math.floor(S.min.y),Math.floor(S.max.x-S.min.x),Math.floor(S.max.y-S.min.y)),g.closePath(),g.stroke(),g.fill(),g.translate(-.5,-.5)),M.hasBounds&&g.setTransform(1,0,0,1,0,0)};var o=function(p,g){var x=p.engine,d=p.timing,C=d.historySize,M=x.timing.timestamp;d.delta=g-d.lastTime||e._goodDelta,d.lastTime=g,d.timestampElapsed=M-d.lastTimestamp||0,d.lastTimestamp=M,d.deltaHistory.unshift(d.delta),d.deltaHistory.length=Math.min(d.deltaHistory.length,C),d.engineDeltaHistory.unshift(x.timing.lastDelta),d.engineDeltaHistory.length=Math.min(d.engineDeltaHistory.length,C),d.timestampElapsedHistory.unshift(d.timestampElapsed),d.timestampElapsedHistory.length=Math.min(d.timestampElapsedHistory.length,C),d.engineUpdatesHistory.unshift(x.timing.lastUpdatesPerFrame),d.engineUpdatesHistory.length=Math.min(d.engineUpdatesHistory.length,C),d.engineElapsedHistory.unshift(x.timing.lastElapsed),d.engineElapsedHistory.length=Math.min(d.engineElapsedHistory.length,C),d.elapsedHistory.unshift(d.lastElapsed),d.elapsedHistory.length=Math.min(d.elapsedHistory.length,C)},h=function(p){for(var g=0,x=0;x<p.length;x+=1)g+=p[x];return g/p.length||0},v=function(p,g){var x=document.createElement("canvas");return x.width=p,x.height=g,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},y=function(p){var g=p.getContext("2d"),x=window.devicePixelRatio||1,d=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return x/d},A=function(p,g){var x=p.textures[g];return x||(x=p.textures[g]=new Image,x.src=g,x)},P=function(p,g){var x=g;/(jpg|gif|png)$/.test(g)&&(x="url("+g+")"),p.canvas.style.background=x,p.canvas.style.backgroundSize="contain",p.currentBackground=g}})()},function(w,c,a){var e={};w.exports=e;var s=a(5),i=a(17),r=a(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(n){var m={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},f=r.extend(m,n);return f.fps=0,f},e.run=function(n,m){return n.timeBuffer=e._frameDeltaFallback,function f(t){n.frameRequestId=e._onNextFrame(n,f),t&&n.enabled&&e.tick(n,m,t)}(),n},e.tick=function(n,m,f){var t=r.now(),l=n.delta,o=0,h=f-n.timeLastTick;if((!h||!n.timeLastTick||h>Math.max(e._maxFrameDelta,n.maxFrameTime))&&(h=n.frameDelta||e._frameDeltaFallback),n.frameDeltaSmoothing){n.frameDeltaHistory.push(h),n.frameDeltaHistory=n.frameDeltaHistory.slice(-n.frameDeltaHistorySize);var v=n.frameDeltaHistory.slice(0).sort(),y=n.frameDeltaHistory.slice(v.length*e._smoothingLowerBound,v.length*e._smoothingUpperBound),A=u(y);h=A||h}n.frameDeltaSnapping&&(h=1e3/Math.round(1e3/h)),n.frameDelta=h,n.timeLastTick=f,n.timeBuffer+=n.frameDelta,n.timeBuffer=r.clamp(n.timeBuffer,0,n.frameDelta+l*e._timeBufferMargin),n.lastUpdatesDeferred=0;var P=n.maxUpdates||Math.ceil(n.maxFrameTime/l),p={timestamp:m.timing.timestamp};s.trigger(n,"beforeTick",p),s.trigger(n,"tick",p);for(var g=r.now();l>0&&n.timeBuffer>=l*e._timeBufferMargin;){s.trigger(n,"beforeUpdate",p),i.update(m,l),s.trigger(n,"afterUpdate",p),n.timeBuffer-=l,o+=1;var x=r.now()-t,d=r.now()-g,C=x+e._elapsedNextEstimate*d/o;if(o>=P||C>n.maxFrameTime){n.lastUpdatesDeferred=Math.round(Math.max(0,n.timeBuffer/l-e._timeBufferMargin));break}}m.timing.lastUpdatesPerFrame=o,s.trigger(n,"afterTick",p),n.frameDeltaHistory.length>=100&&(n.lastUpdatesDeferred&&Math.round(n.frameDelta/l)>P?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):n.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof n.isFixed!="undefined"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(n.deltaMin||n.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),n.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(n){e._cancelNextFrame(n)},e._onNextFrame=function(n,m){if(typeof window!="undefined"&&window.requestAnimationFrame)n.frameRequestId=window.requestAnimationFrame(m);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return n.frameRequestId},e._cancelNextFrame=function(n){if(typeof window!="undefined"&&window.cancelAnimationFrame)window.cancelAnimationFrame(n.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var u=function(n){for(var m=0,f=n.length,t=0;t<f;t+=1)m+=n[t];return m/f||0}})()},function(w,c,a){var e={};w.exports=e;var s=a(8),i=a(0),r=i.deprecated;(function(){e.collides=function(u,n){return s.collides(u,n)},r(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(w,c,a){var e={};w.exports=e;var s=a(1),i=a(0);(function(){e.pathToVertices=function(r,u){typeof window!="undefined"&&!("SVGPathSeg"in window)&&i.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,m,f,t,l,o,h,v,y,A,P=[],p,g,x=0,d=0,C=0;u=u||15;var M=function(E,T,I){var R=I%2===1&&I>1;if(!y||E!=y.x||T!=y.y){y&&R?(p=y.x,g=y.y):(p=0,g=0);var b={x:p+E,y:g+T};(R||!y)&&(y=b),P.push(b),d=p+E,C=g+T}},S=function(E){var T=E.pathSegTypeAsLetter.toUpperCase();if(T!=="Z"){switch(T){case"M":case"L":case"T":case"C":case"S":case"Q":d=E.x,C=E.y;break;case"H":d=E.x;break;case"V":C=E.y;break}M(d,C,E.pathSegType)}};for(e._svgPathToAbsolute(r),f=r.getTotalLength(),o=[],n=0;n<r.pathSegList.numberOfItems;n+=1)o.push(r.pathSegList.getItem(n));for(h=o.concat();x<f;){if(A=r.getPathSegAtLength(x),l=o[A],l!=v){for(;h.length&&h[0]!=l;)S(h.shift());v=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":t=r.getPointAtLength(x),M(t.x,t.y,0);break}x+=u}for(n=0,m=h.length;n<m;++n)S(h[n]);return P},e._svgPathToAbsolute=function(r){for(var u,n,m,f,t,l,o=r.pathSegList,h=0,v=0,y=o.numberOfItems,A=0;A<y;++A){var P=o.getItem(A),p=P.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in P&&(h=P.x),"y"in P&&(v=P.y);else switch("x1"in P&&(m=h+P.x1),"x2"in P&&(t=h+P.x2),"y1"in P&&(f=v+P.y1),"y2"in P&&(l=v+P.y2),"x"in P&&(h+=P.x),"y"in P&&(v+=P.y),p){case"m":o.replaceItem(r.createSVGPathSegMovetoAbs(h,v),A);break;case"l":o.replaceItem(r.createSVGPathSegLinetoAbs(h,v),A);break;case"h":o.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(h),A);break;case"v":o.replaceItem(r.createSVGPathSegLinetoVerticalAbs(v),A);break;case"c":o.replaceItem(r.createSVGPathSegCurvetoCubicAbs(h,v,m,f,t,l),A);break;case"s":o.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(h,v,t,l),A);break;case"q":o.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(h,v,m,f),A);break;case"t":o.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(h,v),A);break;case"a":o.replaceItem(r.createSVGPathSegArcAbs(h,v,P.r1,P.r2,P.angle,P.largeArcFlag,P.sweepFlag),A);break;case"z":case"Z":h=u,v=n;break}(p=="M"||p=="m")&&(u=h,n=v)}}})()},function(w,c,a){var e={};w.exports=e;var s=a(6),i=a(0);(function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint})()}])})});function Ye(w){w.roundRect||(w.roundRect=function(c,a,e,s,i){var f,t,l,o;let r,u,n,m;i==null?r=u=n=m=0:typeof i=="number"?r=u=n=m=i:Array.isArray(i)?(r=(f=i[0])!=null?f:0,u=(t=i[1])!=null?t:r,n=(l=i[2])!=null?l:r,m=(o=i[3])!=null?o:u):r=u=n=m=0,this.moveTo(c+r,a),this.lineTo(c+e-u,a),u?this.arcTo(c+e,a,c+e,a+u,u):this.lineTo(c+e,a),this.lineTo(c+e,a+s-n),n?this.arcTo(c+e,a+s,c+e-n,a+s,n):this.lineTo(c+e,a+s),this.lineTo(c+m,a+s),m?this.arcTo(c,a+s,c,a+s-m,m):this.lineTo(c,a+s),this.lineTo(c,a+r),r?this.arcTo(c,a,c+r,a,r):this.lineTo(c,a),this.closePath()}),w.ellipse||(w.ellipse=function(c,a,e,s,i,r,u,n){this.save(),this.translate(c,a),this.rotate(i),this.scale(e,s),this.arc(0,0,1,r,u,n),this.restore()})}var q=ne(ee());var L={GRAVITY:{x:0,y:1},TIME_STEP:16.666666666666668,WHEEL_RADIUS:12,WHEEL_FRICTION:.95,WHEEL_RESTITUTION:.02,WHEEL_MASS:.4,WHEEL_FRICTION_AIR:5e-4,FRAME_WIDTH:32,FRAME_HEIGHT:5,FRAME_MASS:.2,WHEELBASE:38,PELICAN_HEAD_RADIUS:20,PELICAN_HEAD_MASS:.08,PELICAN_BODY_RX:48,PELICAN_BODY_RY:34,PELICAN_BODY_MASS:1.8,PEDAL_TORQUE:.05,BRAKE_FACTOR:.9,LEAN_FORCE:.0025,GYRO_FACTOR:5e-4,MAX_SPEED:10,CRASH_ANGLE:Math.PI*.42,CRASH_STIFFNESS_DURATION:800,NECK_STIFFNESS:1,SEAT_STIFFNESS:.6,LEG_STIFFNESS:.4,NECK_LENGTH:35},G={CHUNK_WIDTH:3e3,SAMPLE_INTERVAL:8,FLAT_ZONE:500,BASE_AMPLITUDE:100,DETAIL_AMPLITUDE:30,DIFFICULTY_RAMP:6e-4,MAX_DIFFICULTY:2.5,LINE_WIDTH:3.5,DEPTH:800},re={OFFSET_X:.35,OFFSET_Y:.4,SMOOTHING:.06},W={BG:"#FFFFFF",TERRAIN:"#000000",PELICAN_BODY:"#D8D8D8",PELICAN_STROKE:"#555555",PELICAN_WING:"#BBBBBB",PELICAN_HEAD:"#E2E2E2",BEAK:"#FF8C00",LEGS:"#FF8C00",EYE_WHITE:"#FFFFFF",EYE_PUPIL:"#000000",BIKE:"#000000",TEXT:"#000000",UI_BAR:"#000000"};var se=class{constructor(){this.engine=q.default.Engine.create({gravity:L.GRAVITY}),this.world=this.engine.world}update(c){q.default.Engine.update(this.engine,c)}add(...c){q.default.Composite.add(this.world,c)}remove(...c){for(let a of c)q.default.Composite.remove(this.world,a)}onCollision(c){q.default.Events.on(this.engine,"collisionStart",a=>{c(a.pairs)})}clear(){q.default.Composite.clear(this.world,!1)}};var Ve=ne(ee());var at=[[1,1],[-1,1],[1,-1],[-1,-1],[1,0],[-1,0],[0,1],[0,-1]],Be=new Uint8Array(512);function ot(w){let c=new Uint8Array(256);for(let a=0;a<256;a++)c[a]=a;for(let a=255;a>0;a--){w=(w*16807+0)%2147483647;let e=w%(a+1);[c[a],c[e]]=[c[e],c[a]]}for(let a=0;a<512;a++)Be[a]=c[a&255]}ot(42);function lt(w){return w*w*w*(w*(w*6-15)+10)}function ft(w,c,a){return w+a*(c-w)}function Ue(w,c){return at[w&7][0]*c}function ct(w){let c=Math.floor(w),a=w-c,e=lt(a),s=Be[c&255],i=Be[c+1&255];return ft(Ue(s,a),Ue(i,a-1),e)}function ce(w,c=4,a=2,e=.5){let s=0,i=1,r=1,u=0;for(let n=0;n<c;n++)s+=ct(w*r)*i,u+=i,i*=e,r*=a;return s/u}var ue=class{constructor(c){this.baseY=c}generate(c,a){let e=[],s=G.SAMPLE_INTERVAL;for(let i=c;i<=a;i+=s){let r=Math.max(0,i),u=Math.min(G.MAX_DIFFICULTY,r*G.DIFFICULTY_RAMP),n;if(i<G.FLAT_ZONE)n=this.baseY;else{let m=(i-G.FLAT_ZONE)/200,f=Math.min(1,m),t=ce(i*.0015,3)*G.BASE_AMPLITUDE,l=ce(i*.006+500,2)*G.DETAIL_AMPLITUDE,o=ce(i*4e-4+1e3,2)*80*(1+u);n=this.baseY+(t+l+o)*f}e.push({x:i,y:n})}return e}};var ae=class{constructor(c,a){this.chunks=new Map;this.chunkWidth=G.CHUNK_WIDTH;this.allPoints=[];this.generator=new ue(a),this.physics=c}update(c,a){let e=Math.floor((c-this.chunkWidth)/this.chunkWidth),s=Math.floor((c+a+this.chunkWidth)/this.chunkWidth);for(let i=e;i<=s;i++)this.chunks.has(i)||this.createChunk(i);for(let[i]of this.chunks)(i<e-1||i>s+1)&&this.removeChunk(i);this.rebuildPoints(e-1,s+1)}createChunk(c){let a=c*this.chunkWidth,e=a+this.chunkWidth,s=this.generator.generate(a,e),i=this.createBodies(s);i.forEach(r=>this.physics.add(r)),this.chunks.set(c,{points:s,bodies:i})}removeChunk(c){let a=this.chunks.get(c);a&&(a.bodies.forEach(e=>this.physics.remove(e)),this.chunks.delete(c))}createBodies(c){let a=[],e=G.DEPTH;for(let s=0;s<c.length-1;s++){let i=c[s],r=c[s+1],u=(i.x+r.x)/2,n=(i.y+r.y)/2+e/2,m=[{x:i.x-u,y:i.y-n},{x:r.x-u,y:r.y-n},{x:r.x-u,y:r.y-n+e},{x:i.x-u,y:i.y-n+e}],f=Ve.default.Bodies.fromVertices(u,n,[m],{isStatic:!0,friction:.8,restitution:.02,label:"terrain",render:{visible:!1}});f&&a.push(f)}return a}rebuildPoints(c,a){this.allPoints=[];let e=[...this.chunks.keys()].sort((s,i)=>s-i);for(let s of e)if(s>=c&&s<=a){let i=this.chunks.get(s);this.allPoints.push(...i.points)}}getHeightAt(c){for(let a=0;a<this.allPoints.length-1;a++){let e=this.allPoints[a],s=this.allPoints[a+1];if(c>=e.x&&c<=s.x){let i=(c-e.x)/(s.x-e.x);return e.y+i*(s.y-e.y)}}return 400}};var pe=ne(ee());var J=ne(ee());var he=class{constructor(c,a,e){this.crankAngle=0;let s=L.WHEELBASE/2,i=L.WHEEL_RADIUS;this.rearWheel=J.default.Bodies.circle(a-s,e,i,{mass:L.WHEEL_MASS,friction:L.WHEEL_FRICTION,restitution:L.WHEEL_RESTITUTION,frictionAir:L.WHEEL_FRICTION_AIR,label:"rearWheel"}),this.frontWheel=J.default.Bodies.circle(a+s,e,i,{mass:L.WHEEL_MASS,friction:L.WHEEL_FRICTION,restitution:L.WHEEL_RESTITUTION,frictionAir:L.WHEEL_FRICTION_AIR,label:"frontWheel"}),this.frame=J.default.Bodies.rectangle(a,e-i-4,L.FRAME_WIDTH,L.FRAME_HEIGHT,{mass:L.FRAME_MASS,friction:.3,label:"bikeFrame",collisionFilter:{group:-1}}),this.rearAxle=J.default.Constraint.create({bodyA:this.frame,pointA:{x:-s+2,y:i+4},bodyB:this.rearWheel,pointB:{x:0,y:0},stiffness:.9,damping:.05,length:0}),this.frontAxle=J.default.Constraint.create({bodyA:this.frame,pointA:{x:s-2,y:i+4},bodyB:this.frontWheel,pointB:{x:0,y:0},stiffness:.9,damping:.05,length:0}),c.add(this.rearWheel,this.frontWheel,this.frame,this.rearAxle,this.frontAxle)}get position(){return this.frame.position}get angle(){return this.frame.angle}get speed(){let c=this.frame.velocity;return Math.sqrt(c.x*c.x+c.y*c.y)}pedal(c){if(this.speed<L.MAX_SPEED){let a=L.PEDAL_TORQUE*c;this.rearWheel.torque+=a}this.crankAngle+=.15*c}brake(){J.default.Body.setAngularVelocity(this.rearWheel,this.rearWheel.angularVelocity*L.BRAKE_FACTOR),J.default.Body.setAngularVelocity(this.frontWheel,this.frontWheel.angularVelocity*L.BRAKE_FACTOR)}lean(c){this.frame.torque+=L.LEAN_FORCE*c*.8}};var _=ne(ee());var me=class{constructor(c,a,e){this._headReleased=!1;this.headX=0;this.headY=0;this.headAngle=0;this.neckBaseX=0;this.neckBaseY=0;this.physics=c,this.body=_.default.Bodies.circle(a,e,L.PELICAN_BODY_RY,{mass:L.PELICAN_BODY_MASS,friction:.3,frictionAir:.002,label:"pelicanBody",collisionFilter:{group:-1}}),this.head=_.default.Bodies.circle(a+10,e-80,L.PELICAN_HEAD_RADIUS,{mass:L.PELICAN_HEAD_MASS,friction:.3,frictionAir:.04,label:"pelicanHead",collisionFilter:{group:-1}}),c.add(this.body),this.computeHeadPosition(1)}get headReleased(){return this._headReleased}updateNeckBase(c){let a=this.body.position.x,e=this.body.position.y,s=this.body.angle,i=12*c,r=-L.PELICAN_BODY_RY+3;this.neckBaseX=a+Math.cos(s)*i-Math.sin(s)*r,this.neckBaseY=e+Math.sin(s)*i+Math.cos(s)*r}computeHeadPosition(c){this.updateNeckBase(c);let a=this.body.angle,e=L.NECK_LENGTH,s=a-Math.PI/2+.35*c;this.headX=this.neckBaseX+Math.cos(s)*e,this.headY=this.neckBaseY+Math.sin(s)*e,this.headAngle=a*.2}releaseHead(){this._headReleased||(this._headReleased=!0,_.default.Body.setPosition(this.head,{x:this.headX,y:this.headY}),_.default.Body.setAngle(this.head,this.headAngle),_.default.Body.setVelocity(this.head,this.body.velocity),this.physics.add(this.head),this.neck=_.default.Constraint.create({bodyA:this.body,pointA:{x:12,y:-L.PELICAN_BODY_RY+3},bodyB:this.head,pointB:{x:0,y:L.PELICAN_HEAD_RADIUS*.5},stiffness:.6,damping:.3,length:L.NECK_LENGTH*.6}),this.physics.add(this.neck))}};var ve=class{constructor(c,a,e){this.isCrashing=!1;this.crashStartTime=0;this.facingRight=!0;this.startX=0;this.physics=c,this.startX=a;let s=e-L.WHEEL_RADIUS;this.bike=new he(c,a,s);let i=this.bike.frame.position.y-L.FRAME_HEIGHT/2-L.PELICAN_BODY_RY-5;this.pelican=new me(c,a,i),this.seatConstraint=pe.default.Constraint.create({bodyA:this.pelican.body,pointA:{x:0,y:L.PELICAN_BODY_RY-5},bodyB:this.bike.frame,pointB:{x:0,y:-L.FRAME_HEIGHT/2},stiffness:L.SEAT_STIFFNESS,damping:.15,length:5}),c.add(this.seatConstraint)}get position(){return this.bike.position}get distance(){return Math.max(0,Math.abs(this.bike.position.x-this.startX)/10)}get angle(){return this.bike.angle}get speed(){return this.bike.speed}get crashed(){return this.isCrashing}update(c){if(this.isCrashing){let e=Date.now()-this.crashStartTime,s=Math.min(1,e/L.CRASH_STIFFNESS_DURATION);this.seatConstraint.stiffness=L.SEAT_STIFFNESS*(1-s*.9),this.pelican.neck&&(this.pelican.neck.stiffness=.4*(1-s*.85)),this.pelican.updateNeckBase(this.facingRight?1:-1);return}this.pelican.computeHeadPosition(this.facingRight?1:-1);let a=this.speed;if(a>1){let e=-this.bike.angle*L.GYRO_FACTOR*a;this.bike.frame.torque+=e}}pedal(){if(this.isCrashing)return;let c=this.facingRight?1:-1;this.bike.pedal(c)}brake(){this.isCrashing||this.bike.brake()}leanLeft(){this.isCrashing||(this.bike.lean(-1),pe.default.Body.applyForce(this.pelican.body,this.pelican.body.position,{x:-L.LEAN_FORCE*.5,y:0}))}leanRight(){this.isCrashing||(this.bike.lean(1),pe.default.Body.applyForce(this.pelican.body,this.pelican.body.position,{x:L.LEAN_FORCE*.5,y:0}))}turnAround(){this.isCrashing||(this.facingRight=!this.facingRight)}triggerCrash(){this.isCrashing||(this.isCrashing=!0,this.crashStartTime=Date.now(),this.pelican.releaseHead(),this.pelican.head.collisionFilter.group=0,this.pelican.body.collisionFilter.group=0,this.bike.frame.collisionFilter.group=0)}shouldCrash(){return this.isCrashing?!1:Math.abs(this.bike.angle)>L.CRASH_ANGLE}isSettled(){if(!this.isCrashing)return!1;let c=Date.now()-this.crashStartTime;if(c<1e3)return!1;let a=this.bike.frame.velocity;return Math.sqrt(a.x*a.x+a.y*a.y)<.5||c>3e3}};var ge=class{constructor(c,a){this.x=0;this.y=0;this.width=c,this.height=a}follow(c,a){let e=c-this.width*re.OFFSET_X,s=a-this.height*re.OFFSET_Y;this.x+=(e-this.x)*re.SMOOTHING,this.y+=(s-this.y)*re.SMOOTHING}apply(c){c.translate(-this.x,-this.y)}resize(c,a){this.width=c,this.height=a}};var de=class{draw(c,a,e,s){if(a.length<2)return;let i=e-200,r=e+s+200,u=a.filter(t=>t.x>=i&&t.x<=r);if(u.length<3)return;let n=()=>{c.moveTo(u[0].x,u[0].y);for(let l=0;l<u.length-1;l++){let o=u[l],h=u[l+1],v=(o.x+h.x)/2,y=(o.y+h.y)/2;c.quadraticCurveTo(o.x,o.y,v,y)}let t=u[u.length-1];c.lineTo(t.x,t.y)};c.beginPath(),n();let m=u[u.length-1],f=u[0];c.lineTo(m.x,m.y+2e3),c.lineTo(f.x,f.y+2e3),c.closePath(),c.fillStyle=W.BG,c.fill(),c.beginPath(),n(),c.strokeStyle=W.TERRAIN,c.lineWidth=G.LINE_WIDTH,c.lineCap="round",c.lineJoin="round",c.stroke()}};var xe=class{draw(c,a,e){let s=a.rearWheel.position,i=a.frontWheel.position,r=a.frame.position,u=a.frame.angle,n=L.WHEEL_RADIUS;c.strokeStyle=W.BIKE,c.lineWidth=2.5,c.lineCap="round",c.lineJoin="round",this.drawWheel(c,s.x,s.y,n,a.rearWheel.angle),this.drawWheel(c,i.x,i.y,n,a.frontWheel.angle);let m=(s.x+i.x)/2,f=(s.y+i.y)/2,t=m+Math.cos(u-Math.PI/2)*8,l=f+Math.sin(u-Math.PI/2)*8;c.beginPath(),c.moveTo(s.x,s.y),c.lineTo(t,l),c.stroke(),c.beginPath(),c.moveTo(t,l),c.lineTo(i.x,i.y),c.stroke();let o=m-Math.cos(u)*3,h=f-Math.sin(u)*3;c.beginPath(),c.moveTo(s.x,s.y),c.lineTo(o,h),c.stroke(),c.beginPath(),c.moveTo(o,h),c.lineTo(t,l),c.stroke();let v=i.x+Math.cos(u-Math.PI/2)*12,y=i.y+Math.sin(u-Math.PI/2)*12;c.beginPath(),c.moveTo(i.x,i.y),c.lineTo(v,y),c.stroke();let A=Math.cos(u)*5,P=Math.sin(u)*5;c.beginPath(),c.moveTo(v-A,y-P),c.lineTo(v+A,y+P),c.lineWidth=3,c.stroke(),c.lineWidth=2.5;let p=6,g=a.crankAngle,x=o+Math.cos(g)*p,d=h+Math.sin(g)*p,C=o+Math.cos(g+Math.PI)*p,M=h+Math.sin(g+Math.PI)*p;c.beginPath(),c.moveTo(x,d),c.lineTo(C,M),c.stroke(),c.lineWidth=3;for(let[S,E]of[[x,d],[C,M]])c.beginPath(),c.moveTo(S-3,E),c.lineTo(S+3,E),c.stroke()}drawWheel(c,a,e,s,i){c.lineWidth=2.5,c.beginPath(),c.arc(a,e,s,0,Math.PI*2),c.stroke(),c.beginPath(),c.arc(a,e,2,0,Math.PI*2),c.fillStyle=W.BIKE,c.fill(),c.lineWidth=1;for(let r=0;r<6;r++){let u=i+r*Math.PI/3;c.beginPath(),c.moveTo(a+Math.cos(u)*3,e+Math.sin(u)*3),c.lineTo(a+Math.cos(u)*(s-1),e+Math.sin(u)*(s-1)),c.stroke()}}};var ye=class{draw(c,a){let e=a.pelican.body,s=a.bike,i=a.facingRight?1:-1,r,u,n;a.pelican.headReleased?(r=a.pelican.head.position.x,u=a.pelican.head.position.y,n=a.pelican.head.angle):(r=a.pelican.headX,u=a.pelican.headY,n=a.pelican.headAngle),this.drawLegs(c,e,s,i),c.save(),c.translate(e.position.x,e.position.y),c.rotate(e.angle),c.beginPath(),c.ellipse(0,0,L.PELICAN_BODY_RX,L.PELICAN_BODY_RY,0,0,Math.PI*2),c.fillStyle=W.PELICAN_BODY,c.fill(),c.strokeStyle=W.PELICAN_STROKE,c.lineWidth=2,c.stroke(),c.beginPath(),c.ellipse(-5*i,2,L.PELICAN_BODY_RX*.55,L.PELICAN_BODY_RY*.6,-.15*i,0,Math.PI*2),c.fillStyle=W.PELICAN_WING,c.fill(),c.strokeStyle=W.PELICAN_STROKE,c.lineWidth=1,c.stroke(),c.restore();let m=a.pelican.neckBaseX,f=a.pelican.neckBaseY,t=r,l=u+L.PELICAN_HEAD_RADIUS*.4,o=L.NECK_LENGTH*1.5,h=t-m,v=l-f,y=Math.sqrt(h*h+v*v);if(y>o){let d=o/y;t=m+h*d,l=f+v*d}let A=(m+t)/2+4*i,P=(f+l)/2;c.beginPath(),c.moveTo(m,f),c.quadraticCurveTo(A,P,t,l),c.strokeStyle=W.PELICAN_STROKE,c.lineWidth=7,c.lineCap="round",c.stroke(),c.beginPath(),c.moveTo(m,f),c.quadraticCurveTo(A,P,t,l),c.strokeStyle=W.PELICAN_BODY,c.lineWidth=5,c.stroke(),c.save(),c.translate(r,u),c.rotate(n),c.beginPath(),c.arc(0,0,L.PELICAN_HEAD_RADIUS,0,Math.PI*2),c.fillStyle=W.PELICAN_HEAD,c.fill(),c.strokeStyle=W.PELICAN_STROKE,c.lineWidth=2,c.stroke();let p=5*i,g=-4;c.beginPath(),c.arc(p,g,6,0,Math.PI*2),c.fillStyle=W.EYE_WHITE,c.fill(),c.strokeStyle=W.PELICAN_STROKE,c.lineWidth=1.5,c.stroke(),c.beginPath(),c.arc(p+2*i,g,2.5,0,Math.PI*2),c.fillStyle=W.EYE_PUPIL,c.fill();let x=25;c.beginPath(),c.moveTo(L.PELICAN_HEAD_RADIUS*.7*i,-4),c.lineTo((L.PELICAN_HEAD_RADIUS+x)*i,2),c.lineTo(L.PELICAN_HEAD_RADIUS*.7*i,6),c.closePath(),c.fillStyle=W.BEAK,c.fill(),c.strokeStyle="#CC6600",c.lineWidth=1,c.stroke(),c.restore()}drawLegs(c,a,e,s){let i=a.position.x,r=a.position.y+L.PELICAN_BODY_RY-5,u=(e.rearWheel.position.x+e.frontWheel.position.x)/2,n=(e.rearWheel.position.y+e.frontWheel.position.y)/2,m=e.frame.angle,f=u-Math.cos(m)*3,t=n-Math.sin(m)*3,l=6,o=e.crankAngle,h=f+Math.cos(o)*l,v=t+Math.sin(o)*l,y=f+Math.cos(o+Math.PI)*l,A=t+Math.sin(o+Math.PI)*l;c.strokeStyle=W.LEGS,c.lineWidth=4,c.lineCap="round",c.beginPath(),c.moveTo(i-3*s,r),c.lineTo(h,v),c.stroke(),c.beginPath(),c.moveTo(i+3*s,r),c.lineTo(y,A),c.stroke()}};var Se=class{constructor(c,a,e){this.terrain=new de;this.bike=new xe;this.pelican=new ye;this.ctx=c.getContext("2d"),this.canvasWidth=a,this.canvasHeight=e,this.camera=new ge(a,e)}get context(){return this.ctx}clear(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillStyle=W.BG,this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight)}beginWorld(){this.ctx.save(),this.camera.apply(this.ctx)}endWorld(){this.ctx.restore()}resize(c,a){this.canvasWidth=c,this.canvasHeight=a,this.camera.resize(c,a)}get width(){return this.canvasWidth}get height(){return this.canvasHeight}};var Ce=class{constructor(c,a){this.actions=new Set;this.justPressed=new Set;this.zones=[];this.lastTap=null;this.touchStarts=new Map;this.screenW=c,this.screenH=a,this.buildZones(),wx.onTouchStart(e=>this.handleTouchStart(e)),wx.onTouchMove(e=>this.handleTouchMove(e)),wx.onTouchEnd(e=>this.handleTouchEnd(e)),wx.onTouchCancel(e=>this.handleTouchEnd(e))}buildZones(){let c=this.screenW,a=this.screenH,e=c*.2,s=a*.25,i=0;this.zones=[{action:"ArrowUp",x:c-e-i,y:a-s-i,w:e,h:s},{action:"ArrowDown",x:i,y:a-s-i,w:e,h:s},{action:"ArrowRight",x:c-e-i,y:a-s*2-i,w:e,h:s},{action:"ArrowLeft",x:i,y:a-s*2-i,w:e,h:s}]}getActionForTouch(c,a){for(let e of this.zones)if(c>=e.x&&c<=e.x+e.w&&a>=e.y&&a<=e.y+e.h)return e.action;return null}handleTouchStart(c){let a=c.changedTouches||[];for(let e of a){let s=e.clientX,i=e.clientY;this.touchStarts.set(e.identifier,{x:s,y:i,time:Date.now()});let r=this.getActionForTouch(s,i);r&&(this.actions.has(r)||this.justPressed.add(r),this.actions.add(r))}}handleTouchMove(c){this.actions.clear();let a=c.touches||[];for(let e of a){let s=this.getActionForTouch(e.clientX,e.clientY);s&&this.actions.add(s)}}handleTouchEnd(c){let a=c.changedTouches||[];for(let s of a){let i=this.touchStarts.get(s.identifier);this.touchStarts.delete(s.identifier);let r=this.getActionForTouch(s.clientX,s.clientY);if(i){let u=Date.now()-i.time,n=s.clientX-i.x,m=s.clientY-i.y,f=Math.sqrt(n*n+m*m);if(u<300&&f<15){let t=s.clientX,l=s.clientY,o=this.screenW*.2,h=this.screenW*.8;t>o&&t<h&&this.justPressed.add("KeyZ"),this.justPressed.add("Space"),this.lastTap={x:t,y:l,consumed:!1}}}}this.actions.clear();let e=c.touches||[];for(let s of e){let i=this.getActionForTouch(s.clientX,s.clientY);i&&this.actions.add(i)}}isDown(c){return this.actions.has(c)}wasPressed(c){return this.justPressed.has(c)}endFrame(){this.justPressed.clear(),this.lastTap&&this.lastTap.consumed&&(this.lastTap=null)}getZones(){return this.zones}resize(c,a){this.screenW=c,this.screenH=a,this.buildZones()}};var ut={distance:w=>`${Math.floor(w)}\u7C73`,controls:"\u5DE6\u503E \xB7 \u53F3\u503E \xB7 \u5239\u8F66 \xB7 \u8E6C\u8F66",creditLeft:'\u7075\u611F\u6765\u81EA "Pelican benchmark"',creditRight:"\u7531 Claude Code \u6784\u5EFA",startHint:"\u70B9\u51FB\u5C4F\u5E55\u5F00\u59CB\uFF01",gameOver:"\u6E38\u620F\u7ED3\u675F",traveled:w=>`\u4F60\u7684\u9E48\u9E55\u9A91\u4E86 ${Math.floor(w)} \u7C73\uFF01`,playAgain:"\u518D\u6765\u4E00\u5C40",shareWx:"\u5206\u4EAB\u7ED9\u597D\u53CB",shareText:w=>`\u{1F9A9} \u6211\u7684\u9E48\u9E55\u9A91\u4E86 ${Math.floor(w)} \u7C73\uFF01\u4F60\u80FD\u8D85\u8FC7\u5417\uFF1F`,balance:"\u5E73\u8861"};function j(){return ut}var ht={ArrowUp:"\u8E6C\u8F66",ArrowDown:"\u5239\u8F66",ArrowLeft:"\u5DE6\u503E",ArrowRight:"\u53F3\u503E"},Pe=class{draw(c,a,e,s,i,r){c.setTransform(1,0,0,1,0,0);let u=j();c.fillStyle=W.UI_BAR,c.fillRect(0,0,a,24),c.fillStyle=W.UI_BAR,c.fillRect(0,e-28,a,28),c.font="bold 28px sans-serif",c.fillStyle=W.TEXT,c.textAlign="right",c.textBaseline="top",c.fillText(u.distance(s),a-16,32),this.drawBalanceIndicator(c,a/2,48,i),c.font="10px sans-serif",c.fillStyle="#999",c.textAlign="left",c.textBaseline="bottom",c.fillText(u.creditLeft,10,e-8),c.textAlign="right",c.fillText(u.creditRight,a-10,e-8),r&&this.drawTouchZones(c,r)}drawBalanceIndicator(c,a,e,s){let i=j(),r=L.CRASH_ANGLE,u=s/r,n=Math.max(-1,Math.min(1,u)),m=120,f=6,t=a-m/2;c.font="10px sans-serif",c.fillStyle="#999",c.textAlign="center",c.textBaseline="bottom",c.fillText(i.balance,a,e-4),c.fillStyle="#E8E8E8",c.fillRect(t,e,m,f);let l=m*.15;c.fillStyle="rgba(255, 80, 80, 0.3)",c.fillRect(t,e,l,f),c.fillRect(t+m-l,e,l,f),c.fillStyle="#CCC",c.fillRect(a-1,e,2,f);let o=a+n*(m/2-5),h=Math.abs(n),v;h<.4?v="#4CAF50":h<.7?v="#FF9800":v="#F44336",c.beginPath(),c.arc(o,e+f/2,5,0,Math.PI*2),c.fillStyle=v,c.fill(),c.strokeStyle="#FFF",c.lineWidth=1.5,c.stroke()}drawTouchZones(c,a){for(let e of a){let s=ht[e.action]||e.action;c.fillStyle="rgba(0, 0, 0, 0.06)",c.fillRect(e.x,e.y,e.w,e.h),c.strokeStyle="rgba(0, 0, 0, 0.1)",c.lineWidth=1,c.strokeRect(e.x,e.y,e.w,e.h),c.font="bold 14px sans-serif",c.fillStyle="rgba(0, 0, 0, 0.2)",c.textAlign="center",c.textBaseline="middle",c.fillText(s,e.x+e.w/2,e.y+e.h/2)}}};var Ae=class{constructor(){this.playAgainRect={x:0,y:0,w:0,h:0};this.shareRect={x:0,y:0,w:0,h:0}}draw(c,a,e,s,i){c.setTransform(1,0,0,1,0,0);let r=j();if(c.fillStyle=`rgba(255, 255, 255, ${.85*i})`,c.fillRect(0,0,a,e),i<.5)return;let u=a/2,n=e/2-20;c.font="bold 40px sans-serif",c.fillStyle="#000",c.textAlign="center",c.textBaseline="middle",c.fillText(r.gameOver,u,n-50),c.font="22px sans-serif",c.fillText(r.traveled(s),u,n);let m=180,f=44,t=16,l=n+50,o=u-m-t/2;this.playAgainRect={x:o,y:l,w:m,h:f},this.drawButton(c,o,l,m,f,r.playAgain);let h=u+t/2;this.shareRect={x:h,y:l,w:m,h:f},this.drawButton(c,h,l,m,f,r.shareWx)}drawButton(c,a,e,s,i,r){c.strokeStyle="#000",c.lineWidth=2,c.strokeRect(a,e,s,i),c.fillStyle="#FFF",c.fillRect(a+1,e+1,s-2,i-2),c.font="16px sans-serif",c.fillStyle="#000",c.textAlign="center",c.textBaseline="middle",c.fillText(r,a+s/2,e+i/2)}handleClick(c,a,e){if(this.hitTest(c,a,this.playAgainRect))return"playAgain";if(this.hitTest(c,a,this.shareRect)){let s=j();try{wx.shareAppMessage({title:s.shareText(e)})}catch(i){}return"share"}return null}hitTest(c,a,e){return c>=e.x&&c<=e.x+e.w&&a>=e.y&&a<=e.y+e.h}};var Me=class{constructor(c,a,e){this.state=0;this.gameOverAlpha=0;this.lastTime=0;this.screenW=a,this.screenH=e,this.renderer=new Se(c,a,e),this.physics=new se,this.input=new Ce(a,e),this.hud=new Pe,this.gameOver=new Ae,this.baseY=e*.6,this.terrain=new ae(this.physics,this.baseY),this.setupCollision(),this.reset();try{wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(()=>({title:"\u9E48\u9E55\u9A91\u81EA\u884C\u8F66 - \u7269\u7406\u5E73\u8861\u5C0F\u6E38\u620F"}))}catch(s){}}setupCollision(){this.physics.onCollision(c=>{if(this.state===1)for(let a of c){let e=[a.bodyA.label,a.bodyB.label],s=e.some(r=>r==="terrain"),i=e.some(r=>r==="pelicanHead"||r==="pelicanBody");if(s&&i){this.startCrash();return}}})}reset(){this.physics=new se,this.setupCollision(),this.baseY=this.screenH*.6,this.terrain=new ae(this.physics,this.baseY);let c=150;this.terrain.update(0,this.screenW);let a=this.terrain.getHeightAt(c)||this.baseY;this.pelicanBike=new ve(this.physics,c,a),this.state=0,this.gameOverAlpha=0,this.renderer.camera.x=this.pelicanBike.position.x-this.screenW*.35,this.renderer.camera.y=this.pelicanBike.position.y-this.screenH*.4}startCrash(){this.state===1&&(this.state=2,this.pelicanBike.triggerCrash())}update(c){let a=Math.min(c-this.lastTime,33);if(this.lastTime=c,this.state===0&&(this.input.isDown("ArrowUp")||this.input.wasPressed("Space"))&&(this.state=1),this.state===1&&(this.input.isDown("ArrowUp")&&this.pelicanBike.pedal(),this.input.isDown("ArrowDown")&&this.pelicanBike.brake(),this.input.isDown("ArrowLeft")&&this.pelicanBike.leanLeft(),this.input.isDown("ArrowRight")&&this.pelicanBike.leanRight(),this.input.wasPressed("KeyZ")&&this.pelicanBike.turnAround(),this.pelicanBike.shouldCrash()&&this.startCrash()),this.state===2&&(this.pelicanBike.update(a),this.pelicanBike.isSettled()&&(this.state=3)),this.state===3){this.gameOverAlpha=Math.min(1,this.gameOverAlpha+.03);let e=this.input.lastTap;if(e&&!e.consumed){let s=this.gameOver.handleClick(e.x,e.y,this.pelicanBike.distance);e.consumed=!0,s==="playAgain"&&this.reset()}else this.input.wasPressed("Space")&&!e&&this.reset()}this.state!==3&&(this.physics.update(a),this.pelicanBike.update(a)),this.terrain.update(this.renderer.camera.x,this.screenW),this.renderer.camera.follow(this.pelicanBike.position.x,this.pelicanBike.position.y),this.input.endFrame()}draw(){if(this.renderer.clear(),this.renderer.beginWorld(),this.renderer.terrain.draw(this.renderer.context,this.terrain.allPoints,this.renderer.camera.x,this.screenW),this.renderer.bike.draw(this.renderer.context,this.pelicanBike.bike,this.pelicanBike.facingRight),this.renderer.pelican.draw(this.renderer.context,this.pelicanBike),this.renderer.endWorld(),this.hud.draw(this.renderer.context,this.screenW,this.screenH,this.pelicanBike.distance,this.pelicanBike.angle,this.state===1?this.input.getZones():void 0),this.state===0){let c=this.renderer.context;c.setTransform(1,0,0,1,0,0),c.font="20px sans-serif",c.fillStyle="#666",c.textAlign="center",c.textBaseline="middle",c.fillText(j().startHint,this.screenW/2,this.screenH*.2)}this.state===3&&this.gameOver.draw(this.renderer.context,this.screenW,this.screenH,this.pelicanBike.distance,this.gameOverAlpha)}resize(c,a){this.screenW=c,this.screenH=a,this.renderer.resize(c,a),this.input.resize(c,a),this.baseY=a*.6}};var be=wx.getSystemInfoSync(),Xe=be.screenWidth,ze=be.screenHeight,Te=be.pixelRatio,Ee=wx.createCanvas();Ee.width=Xe*Te;Ee.height=ze*Te;var Ke=Ee.getContext("2d");Ke.scale(Te,Te);Ye(Ke);var Ge=new Me(Ee,Xe,ze);function Ze(w){Ge.update(w),Ge.draw(),requestAnimationFrame(Ze)}requestAnimationFrame(Ze);
/*! Bundled license information:

matter-js/build/matter.js:
  (*!
   * matter-js 0.20.0 by @liabru
   * http://brm.io/matter-js/
   * License MIT
   * 
   * The MIT License (MIT)
   * 
   * Copyright (c) Liam Brummitt and contributors.
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   * 
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   * 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   *)
*/
